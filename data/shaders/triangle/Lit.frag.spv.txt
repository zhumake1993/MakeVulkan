Lit.frag
// Module Version 10000
// Generated by (magic number): 80008
// Id's are bound by 735

                              Capability Shader
               2:             ExtInstImport  "GLSL.std.450"
                              MemoryModel Logical GLSL450
                              EntryPoint Fragment 5  "main" 416 429 459 733
                              ExecutionMode 5 OriginUpperLeft
               1:             String  "Lit.frag"
                              Source GLSL 450 1  "// OpModuleProcessed client vulkan100
// OpModuleProcessed target-env vulkan1.0
// OpModuleProcessed entry-point main
#line 1
#version 450

/////////////////////////////////////////////////////
// Light
/////////////////////////////////////////////////////

#define MaxLights 16

layout (constant_id = 0) const int NUM_DIR_LIGHTS = 0;
layout (constant_id = 1) const int NUM_POINT_LIGHTS = 0;
layout (constant_id = 2) const int NUM_SPOT_LIGHTS = 0;

struct Light
{
	vec3 strength; // light color
	float falloffStart; // point/spot light only
	vec3 direction;// directional/spot lightonly
	float falloffEnd; // point/spot light only
	vec3 position; // point/spot light only
	float spotPower; // spot light only
};

struct Material
{
	vec4 diffuseAlbedo;
	vec3 fresnelR0;
	float roughness;
	mat4 matTransform;
};

float CalcAttenuation(float d, float falloffStart, float falloffEnd)
{
	// Linear falloff.
	return clamp((falloffEnd - d) / (falloffEnd - falloffStart), 0.0f, 1.0f);
}

// Schlick gives an approximation to Fresne reflectance
// (see pg. 233 “Real-Time Rendering 3rd Ed.”).
// R0 = ( (n-1)/(n+1) )^2, where n is the index of refraction.
vec3 SchlickFresnel(vec3 R0, vec3 normal, vec3 lightVec)
{
	float cosIncidentAngle = clamp(dot(normal, lightVec), 0.0f, 1.0f);
	float f0 = 1.0f - cosIncidentAngle;
	vec3 reflectPercent = R0 + (1.0f - R0)* (f0*f0*f0*f0*f0);
	return reflectPercent;
}

vec3 BlinnPhong(vec3 lightStrength, vec3 lightVec, vec3 normal, vec3 toEye, Material mat)
{
	// Derive m from the shininess, which is derived from the roughness.
	const float shininess = 1.0f - mat.roughness;
	const float m = shininess * 256.0f;
	vec3 halfVec = normalize(toEye + lightVec);
	
	float roughnessFactor = (m + 8.0f)*pow(max(dot(halfVec, normal), 0.0f), m) / 8.0f;
	vec3 fresnelFactor = SchlickFresnel(mat.fresnelR0, halfVec, lightVec);
	
	vec3 specAlbedo = fresnelFactor*roughnessFactor;
	
	// Our spec formula goes outside [0,1] range, but we are doing
	// LDR rendering. So scale it down a bit.
	specAlbedo = specAlbedo / (specAlbedo + 1.0f);
	return (mat.diffuseAlbedo.rgb + specAlbedo) * lightStrength;
}

vec3 ComputeDirectionalLight(Light L, Material mat, vec3 normal, vec3 toEye)
{
	// The light vector aims opposite the direction the light rays travel.
	vec3 lightVec = -L.direction;
	
	// Scale light down by Lambert’s cosine law.
	float ndotl = max(dot(lightVec, normal), 0.0f);
	vec3 lightStrength = L.strength * ndotl;
	return BlinnPhong(lightStrength, lightVec, normal, toEye, mat);
}

vec3 ComputePointLight(Light L, Material mat, vec3 pos, vec3 normal, vec3 toEye)
{
	// The vector from the surface to the light.
	vec3 lightVec = L.position - pos;
	
	// The distance from surface to light.
	float d = length(lightVec);
	
	// Range test.
	if(d > L.falloffEnd)
	return vec3(0.0f, 0.0f, 0.0f);
	
	// Normalize the light vector.
	lightVec /= d;
	
	// Scale light down by Lambert’s cosine law.
	float ndotl = max(dot(lightVec, normal), 0.0f);
	vec3 lightStrength = L.strength * ndotl;
	
	// Attenuate light by distance.
	float att = CalcAttenuation(d, L.falloffStart, L.falloffEnd);
	lightStrength *= att;
	
	return BlinnPhong(lightStrength, lightVec, normal, toEye, mat);
}

vec3 ComputeSpotLight(Light L, Material mat, vec3 pos, vec3 normal, vec3 toEye)
{
	// The vector from the surface to the light.
	vec3 lightVec = L.position - pos;
	
	// The distance from surface to light.
	float d = length(lightVec);
	
	// Range test.
	if(d > L.falloffEnd)
	return vec3(0.0f, 0.0f, 0.0f);
	
	// Normalize the light vector.
	lightVec /= d;
	
	// Scale light down by Lambert’s cosine law.
	float ndotl = max(dot(lightVec, normal), 0.0f);
	vec3 lightStrength = L.strength * ndotl;
	
	// Attenuate light by distance.
	float att = CalcAttenuation(d, L.falloffStart, L.falloffEnd);
	lightStrength *= att;
	
	// Scale by spotlight
	float spotFactor = pow(max(dot(-lightVec, L.direction), 0.0f), L.spotPower);
	lightStrength *= spotFactor;
	
	return BlinnPhong(lightStrength, lightVec, normal, toEye, mat);
}

vec4 ComputeLighting(Light gLights[MaxLights], Material mat, vec3 pos, vec3 normal, vec3 toEye, vec3 shadowFactor)
{
	vec3 result = vec3(0.0f, 0.0f, 0.0f);
	int i = 0;


	for(i = 0; i < NUM_DIR_LIGHTS; ++i)
	{
		result += shadowFactor[i] * ComputeDirectionalLight(gLights[i], mat, normal, toEye);
	}

	for(i = NUM_DIR_LIGHTS; i < NUM_DIR_LIGHTS+NUM_POINT_LIGHTS; ++i)
	{
		result += ComputePointLight(gLights[i], mat, pos, normal, toEye);
	}

	for(i = NUM_DIR_LIGHTS + NUM_POINT_LIGHTS; i < NUM_DIR_LIGHTS + NUM_POINT_LIGHTS + NUM_SPOT_LIGHTS; ++i)
	{
		result += ComputeSpotLight(gLights[i], mat, pos, normal, toEye);
	}

	return vec4(result, 0.0f);
}

/////////////////////////////////////////////////////
// Uniform
/////////////////////////////////////////////////////

layout(set=1, binding=0) uniform PerView {
    mat4 view;
    mat4 proj;
	vec4 eyePos;
	
	vec4 ambientLight;
	// Indices [0, NUM_DIR_LIGHTS) are directional lights;
	// indices [NUM_DIR_LIGHTS, NUM_DIR_LIGHTS+NUM_POINT_LIGHTS) are
	// point lights;
	// indices [NUM_DIR_LIGHTS+NUM_POINT_LIGHTS,
	// NUM_DIR_LIGHTS+NUM_POINT_LIGHT+NUM_SPOT_LIGHTS)
	// are spot lights for a maximum of MaxLights per object.
	Light lights[MaxLights];
};

layout(set=2, binding=0) uniform PerMaterial{
	Material gMaterial;
};

layout(set=2, binding=1) uniform sampler2D baseTexture;

layout(location = 0) in vec3 v_Normal;
layout(location = 1) in vec2 v_Texcoord;
layout(location = 2) in vec4 v_wPos;

layout(location = 0) out vec4 o_Color;

/////////////////////////////////////////////////////
// Shader
/////////////////////////////////////////////////////

void main() {

	// Interpolating normal can unnormalize it, so renormalize it.
	vec3 normal = normalize(v_Normal);
	
	// Vector from point being lit to eye.
	vec4 toEyeW = normalize(eyePos - v_wPos);
	
	// Material
	Material mat = gMaterial;
	mat.diffuseAlbedo = mat.diffuseAlbedo * texture(baseTexture, v_Texcoord);
	
	// Indirect lighting.
	vec4 ambient = ambientLight * mat.diffuseAlbedo;
	
	// Direct lighting.
	vec3 shadowFactor = vec3(1.0f, 1.0f, 1.0f);
	vec4 directLight = ComputeLighting(lights, mat, v_wPos.xyz, normal, toEyeW.xyz, shadowFactor);
	vec4 litColor = ambient + directLight;
	
	// Common convention to take alpha from diffuse material.
	litColor.a = mat.diffuseAlbedo.a;

	o_Color = litColor;
}"
                              Name 5  "main"
                              Name 13  "CalcAttenuation(f1;f1;f1;"
                              Name 10  "d"
                              Name 11  "falloffStart"
                              Name 12  "falloffEnd"
                              Name 21  "SchlickFresnel(vf3;vf3;vf3;"
                              Name 18  "R0"
                              Name 19  "normal"
                              Name 20  "lightVec"
                              Name 25  "Material"
                              MemberName 25(Material) 0  "diffuseAlbedo"
                              MemberName 25(Material) 1  "fresnelR0"
                              MemberName 25(Material) 2  "roughness"
                              MemberName 25(Material) 3  "matTransform"
                              Name 33  "BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;"
                              Name 28  "lightStrength"
                              Name 29  "lightVec"
                              Name 30  "normal"
                              Name 31  "toEye"
                              Name 32  "mat"
                              Name 35  "Light"
                              MemberName 35(Light) 0  "strength"
                              MemberName 35(Light) 1  "falloffStart"
                              MemberName 35(Light) 2  "direction"
                              MemberName 35(Light) 3  "falloffEnd"
                              MemberName 35(Light) 4  "position"
                              MemberName 35(Light) 5  "spotPower"
                              Name 42  "ComputeDirectionalLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;"
                              Name 38  "L"
                              Name 39  "mat"
                              Name 40  "normal"
                              Name 41  "toEye"
                              Name 50  "ComputePointLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;"
                              Name 45  "L"
                              Name 46  "mat"
                              Name 47  "pos"
                              Name 48  "normal"
                              Name 49  "toEye"
                              Name 57  "ComputeSpotLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;"
                              Name 52  "L"
                              Name 53  "mat"
                              Name 54  "pos"
                              Name 55  "normal"
                              Name 56  "toEye"
                              Name 70  "ComputeLighting(struct-Light-vf3-f1-vf3-f1-vf3-f11[16];struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;vf3;"
                              Name 64  "gLights"
                              Name 65  "mat"
                              Name 66  "pos"
                              Name 67  "normal"
                              Name 68  "toEye"
                              Name 69  "shadowFactor"
                              Name 84  "cosIncidentAngle"
                              Name 89  "f0"
                              Name 92  "reflectPercent"
                              Name 111  "shininess"
                              Name 117  "m"
                              Name 121  "halfVec"
                              Name 126  "roughnessFactor"
                              Name 138  "fresnelFactor"
                              Name 140  "param"
                              Name 143  "param"
                              Name 145  "param"
                              Name 148  "specAlbedo"
                              Name 168  "lightVec"
                              Name 172  "ndotl"
                              Name 177  "lightStrength"
                              Name 182  "param"
                              Name 184  "param"
                              Name 186  "param"
                              Name 188  "param"
                              Name 190  "param"
                              Name 195  "lightVec"
                              Name 201  "d"
                              Name 218  "ndotl"
                              Name 223  "lightStrength"
                              Name 228  "att"
                              Name 229  "param"
                              Name 231  "param"
                              Name 234  "param"
                              Name 241  "param"
                              Name 243  "param"
                              Name 245  "param"
                              Name 247  "param"
                              Name 249  "param"
                              Name 254  "lightVec"
                              Name 259  "d"
                              Name 273  "ndotl"
                              Name 278  "lightStrength"
                              Name 283  "att"
                              Name 284  "param"
                              Name 286  "param"
                              Name 289  "param"
                              Name 296  "spotFactor"
                              Name 310  "param"
                              Name 312  "param"
                              Name 314  "param"
                              Name 316  "param"
                              Name 318  "param"
                              Name 323  "result"
                              Name 325  "i"
                              Name 332  "NUM_DIR_LIGHTS"
                              Name 338  "param"
                              Name 341  "param"
                              Name 343  "param"
                              Name 345  "param"
                              Name 359  "NUM_POINT_LIGHTS"
                              Name 363  "param"
                              Name 366  "param"
                              Name 368  "param"
                              Name 370  "param"
                              Name 372  "param"
                              Name 387  "NUM_SPOT_LIGHTS"
                              Name 391  "param"
                              Name 394  "param"
                              Name 396  "param"
                              Name 398  "param"
                              Name 400  "param"
                              Name 414  "normal"
                              Name 416  "v_Normal"
                              Name 419  "toEyeW"
                              Name 420  "Light"
                              MemberName 420(Light) 0  "strength"
                              MemberName 420(Light) 1  "falloffStart"
                              MemberName 420(Light) 2  "direction"
                              MemberName 420(Light) 3  "falloffEnd"
                              MemberName 420(Light) 4  "position"
                              MemberName 420(Light) 5  "spotPower"
                              Name 422  "PerView"
                              MemberName 422(PerView) 0  "view"
                              MemberName 422(PerView) 1  "proj"
                              MemberName 422(PerView) 2  "eyePos"
                              MemberName 422(PerView) 3  "ambientLight"
                              MemberName 422(PerView) 4  "lights"
                              Name 424  ""
                              Name 429  "v_wPos"
                              Name 433  "mat"
                              Name 434  "Material"
                              MemberName 434(Material) 0  "diffuseAlbedo"
                              MemberName 434(Material) 1  "fresnelR0"
                              MemberName 434(Material) 2  "roughness"
                              MemberName 434(Material) 3  "matTransform"
                              Name 435  "PerMaterial"
                              MemberName 435(PerMaterial) 0  "gMaterial"
                              Name 437  ""
                              Name 455  "baseTexture"
                              Name 459  "v_Texcoord"
                              Name 464  "ambient"
                              Name 470  "shadowFactor"
                              Name 472  "directLight"
                              Name 473  "param"
                              Name 711  "param"
                              Name 713  "param"
                              Name 716  "param"
                              Name 718  "param"
                              Name 721  "param"
                              Name 724  "litColor"
                              Name 733  "o_Color"
                              Decorate 332(NUM_DIR_LIGHTS) SpecId 0
                              Decorate 359(NUM_POINT_LIGHTS) SpecId 1
                              Decorate 387(NUM_SPOT_LIGHTS) SpecId 2
                              Decorate 416(v_Normal) Location 0
                              MemberDecorate 420(Light) 0 Offset 0
                              MemberDecorate 420(Light) 1 Offset 12
                              MemberDecorate 420(Light) 2 Offset 16
                              MemberDecorate 420(Light) 3 Offset 28
                              MemberDecorate 420(Light) 4 Offset 32
                              MemberDecorate 420(Light) 5 Offset 44
                              Decorate 421 ArrayStride 48
                              MemberDecorate 422(PerView) 0 ColMajor
                              MemberDecorate 422(PerView) 0 Offset 0
                              MemberDecorate 422(PerView) 0 MatrixStride 16
                              MemberDecorate 422(PerView) 1 ColMajor
                              MemberDecorate 422(PerView) 1 Offset 64
                              MemberDecorate 422(PerView) 1 MatrixStride 16
                              MemberDecorate 422(PerView) 2 Offset 128
                              MemberDecorate 422(PerView) 3 Offset 144
                              MemberDecorate 422(PerView) 4 Offset 160
                              Decorate 422(PerView) Block
                              Decorate 424 DescriptorSet 1
                              Decorate 424 Binding 0
                              Decorate 429(v_wPos) Location 2
                              MemberDecorate 434(Material) 0 Offset 0
                              MemberDecorate 434(Material) 1 Offset 16
                              MemberDecorate 434(Material) 2 Offset 28
                              MemberDecorate 434(Material) 3 ColMajor
                              MemberDecorate 434(Material) 3 Offset 32
                              MemberDecorate 434(Material) 3 MatrixStride 16
                              MemberDecorate 435(PerMaterial) 0 Offset 0
                              Decorate 435(PerMaterial) Block
                              Decorate 437 DescriptorSet 2
                              Decorate 437 Binding 0
                              Decorate 455(baseTexture) DescriptorSet 2
                              Decorate 455(baseTexture) Binding 1
                              Decorate 459(v_Texcoord) Location 1
                              Decorate 733(o_Color) Location 0
               3:             TypeVoid
               4:             TypeFunction 3
               7:             TypeFloat 32
               8:             TypePointer Function 7(float)
               9:             TypeFunction 7(float) 8(ptr) 8(ptr) 8(ptr)
              15:             TypeVector 7(float) 3
              16:             TypePointer Function 15(fvec3)
              17:             TypeFunction 15(fvec3) 16(ptr) 16(ptr) 16(ptr)
              23:             TypeVector 7(float) 4
              24:             TypeMatrix 23(fvec4) 4
    25(Material):             TypeStruct 23(fvec4) 15(fvec3) 7(float) 24
              26:             TypePointer Function 25(Material)
              27:             TypeFunction 15(fvec3) 16(ptr) 16(ptr) 16(ptr) 16(ptr) 26(ptr)
       35(Light):             TypeStruct 15(fvec3) 7(float) 15(fvec3) 7(float) 15(fvec3) 7(float)
              36:             TypePointer Function 35(Light)
              37:             TypeFunction 15(fvec3) 36(ptr) 26(ptr) 16(ptr) 16(ptr)
              44:             TypeFunction 15(fvec3) 36(ptr) 26(ptr) 16(ptr) 16(ptr) 16(ptr)
              59:             TypeInt 32 0
              60:     59(int) Constant 16
              61:             TypeArray 35(Light) 60
              62:             TypePointer Function 61
              63:             TypeFunction 23(fvec4) 62(ptr) 26(ptr) 16(ptr) 16(ptr) 16(ptr) 16(ptr)
              79:    7(float) Constant 0
              80:    7(float) Constant 1065353216
             112:             TypeInt 32 1
             113:    112(int) Constant 2
             119:    7(float) Constant 1132462080
             128:    7(float) Constant 1090519040
             139:    112(int) Constant 1
             157:    112(int) Constant 0
             158:             TypePointer Function 23(fvec4)
             196:    112(int) Constant 4
             205:    112(int) Constant 3
             208:             TypeBool
             212:   15(fvec3) ConstantComposite 79 79 79
             303:    112(int) Constant 5
             324:             TypePointer Function 112(int)
332(NUM_DIR_LIGHTS):    112(int) SpecConstant 0
359(NUM_POINT_LIGHTS):    112(int) SpecConstant 0
             360:    112(int) SpecConstantOp 128 332(NUM_DIR_LIGHTS) 359(NUM_POINT_LIGHTS)
             379:    112(int) SpecConstantOp 128 332(NUM_DIR_LIGHTS) 359(NUM_POINT_LIGHTS)
             386:    112(int) SpecConstantOp 128 332(NUM_DIR_LIGHTS) 359(NUM_POINT_LIGHTS)
387(NUM_SPOT_LIGHTS):    112(int) SpecConstant 0
             388:    112(int) SpecConstantOp 128 386 387(NUM_SPOT_LIGHTS)
             415:             TypePointer Input 15(fvec3)
   416(v_Normal):    415(ptr) Variable Input
      420(Light):             TypeStruct 15(fvec3) 7(float) 15(fvec3) 7(float) 15(fvec3) 7(float)
             421:             TypeArray 420(Light) 60
    422(PerView):             TypeStruct 24 24 23(fvec4) 23(fvec4) 421
             423:             TypePointer Uniform 422(PerView)
             424:    423(ptr) Variable Uniform
             425:             TypePointer Uniform 23(fvec4)
             428:             TypePointer Input 23(fvec4)
     429(v_wPos):    428(ptr) Variable Input
   434(Material):             TypeStruct 23(fvec4) 15(fvec3) 7(float) 24
435(PerMaterial):             TypeStruct 434(Material)
             436:             TypePointer Uniform 435(PerMaterial)
             437:    436(ptr) Variable Uniform
             438:             TypePointer Uniform 434(Material)
             448:             TypePointer Function 24
             452:             TypeImage 7(float) 2D sampled format:Unknown
             453:             TypeSampledImage 452
             454:             TypePointer UniformConstant 453
455(baseTexture):    454(ptr) Variable UniformConstant
             457:             TypeVector 7(float) 2
             458:             TypePointer Input 457(fvec2)
 459(v_Texcoord):    458(ptr) Variable Input
             471:   15(fvec3) ConstantComposite 80 80 80
             474:             TypePointer Uniform 421
             562:    112(int) Constant 6
             577:    112(int) Constant 7
             592:    112(int) Constant 8
             607:    112(int) Constant 9
             622:    112(int) Constant 10
             637:    112(int) Constant 11
             652:    112(int) Constant 12
             667:    112(int) Constant 13
             682:    112(int) Constant 14
             697:    112(int) Constant 15
             728:     59(int) Constant 3
             732:             TypePointer Output 23(fvec4)
    733(o_Color):    732(ptr) Variable Output
         5(main):           3 Function None 4
               6:             Label
     414(normal):     16(ptr) Variable Function
     419(toEyeW):    158(ptr) Variable Function
        433(mat):     26(ptr) Variable Function
    464(ambient):    158(ptr) Variable Function
470(shadowFactor):     16(ptr) Variable Function
472(directLight):    158(ptr) Variable Function
      473(param):     62(ptr) Variable Function
      711(param):     26(ptr) Variable Function
      713(param):     16(ptr) Variable Function
      716(param):     16(ptr) Variable Function
      718(param):     16(ptr) Variable Function
      721(param):     16(ptr) Variable Function
   724(litColor):    158(ptr) Variable Function
                              Line 1 195 0
             417:   15(fvec3) Load 416(v_Normal)
             418:   15(fvec3) ExtInst 2(GLSL.std.450) 69(Normalize) 417
                              Store 414(normal) 418
                              Line 1 198 0
             426:    425(ptr) AccessChain 424 113
             427:   23(fvec4) Load 426
             430:   23(fvec4) Load 429(v_wPos)
             431:   23(fvec4) FSub 427 430
             432:   23(fvec4) ExtInst 2(GLSL.std.450) 69(Normalize) 431
                              Store 419(toEyeW) 432
                              Line 1 201 0
             439:    438(ptr) AccessChain 437 157
             440:434(Material) Load 439
             441:   23(fvec4) CompositeExtract 440 0
             442:    158(ptr) AccessChain 433(mat) 157
                              Store 442 441
             443:   15(fvec3) CompositeExtract 440 1
             444:     16(ptr) AccessChain 433(mat) 139
                              Store 444 443
             445:    7(float) CompositeExtract 440 2
             446:      8(ptr) AccessChain 433(mat) 113
                              Store 446 445
             447:          24 CompositeExtract 440 3
             449:    448(ptr) AccessChain 433(mat) 205
                              Store 449 447
                              Line 1 202 0
             450:    158(ptr) AccessChain 433(mat) 157
             451:   23(fvec4) Load 450
             456:         453 Load 455(baseTexture)
             460:  457(fvec2) Load 459(v_Texcoord)
             461:   23(fvec4) ImageSampleImplicitLod 456 460
             462:   23(fvec4) FMul 451 461
             463:    158(ptr) AccessChain 433(mat) 157
                              Store 463 462
                              Line 1 205 0
             465:    425(ptr) AccessChain 424 205
             466:   23(fvec4) Load 465
             467:    158(ptr) AccessChain 433(mat) 157
             468:   23(fvec4) Load 467
             469:   23(fvec4) FMul 466 468
                              Store 464(ambient) 469
                              Line 1 208 0
                              Store 470(shadowFactor) 471
                              Line 1 209 0
             475:    474(ptr) AccessChain 424 196
             476:         421 Load 475
             477:  420(Light) CompositeExtract 476 0
             478:     36(ptr) AccessChain 473(param) 157
             479:   15(fvec3) CompositeExtract 477 0
             480:     16(ptr) AccessChain 478 157
                              Store 480 479
             481:    7(float) CompositeExtract 477 1
             482:      8(ptr) AccessChain 478 139
                              Store 482 481
             483:   15(fvec3) CompositeExtract 477 2
             484:     16(ptr) AccessChain 478 113
                              Store 484 483
             485:    7(float) CompositeExtract 477 3
             486:      8(ptr) AccessChain 478 205
                              Store 486 485
             487:   15(fvec3) CompositeExtract 477 4
             488:     16(ptr) AccessChain 478 196
                              Store 488 487
             489:    7(float) CompositeExtract 477 5
             490:      8(ptr) AccessChain 478 303
                              Store 490 489
             491:  420(Light) CompositeExtract 476 1
             492:     36(ptr) AccessChain 473(param) 139
             493:   15(fvec3) CompositeExtract 491 0
             494:     16(ptr) AccessChain 492 157
                              Store 494 493
             495:    7(float) CompositeExtract 491 1
             496:      8(ptr) AccessChain 492 139
                              Store 496 495
             497:   15(fvec3) CompositeExtract 491 2
             498:     16(ptr) AccessChain 492 113
                              Store 498 497
             499:    7(float) CompositeExtract 491 3
             500:      8(ptr) AccessChain 492 205
                              Store 500 499
             501:   15(fvec3) CompositeExtract 491 4
             502:     16(ptr) AccessChain 492 196
                              Store 502 501
             503:    7(float) CompositeExtract 491 5
             504:      8(ptr) AccessChain 492 303
                              Store 504 503
             505:  420(Light) CompositeExtract 476 2
             506:     36(ptr) AccessChain 473(param) 113
             507:   15(fvec3) CompositeExtract 505 0
             508:     16(ptr) AccessChain 506 157
                              Store 508 507
             509:    7(float) CompositeExtract 505 1
             510:      8(ptr) AccessChain 506 139
                              Store 510 509
             511:   15(fvec3) CompositeExtract 505 2
             512:     16(ptr) AccessChain 506 113
                              Store 512 511
             513:    7(float) CompositeExtract 505 3
             514:      8(ptr) AccessChain 506 205
                              Store 514 513
             515:   15(fvec3) CompositeExtract 505 4
             516:     16(ptr) AccessChain 506 196
                              Store 516 515
             517:    7(float) CompositeExtract 505 5
             518:      8(ptr) AccessChain 506 303
                              Store 518 517
             519:  420(Light) CompositeExtract 476 3
             520:     36(ptr) AccessChain 473(param) 205
             521:   15(fvec3) CompositeExtract 519 0
             522:     16(ptr) AccessChain 520 157
                              Store 522 521
             523:    7(float) CompositeExtract 519 1
             524:      8(ptr) AccessChain 520 139
                              Store 524 523
             525:   15(fvec3) CompositeExtract 519 2
             526:     16(ptr) AccessChain 520 113
                              Store 526 525
             527:    7(float) CompositeExtract 519 3
             528:      8(ptr) AccessChain 520 205
                              Store 528 527
             529:   15(fvec3) CompositeExtract 519 4
             530:     16(ptr) AccessChain 520 196
                              Store 530 529
             531:    7(float) CompositeExtract 519 5
             532:      8(ptr) AccessChain 520 303
                              Store 532 531
             533:  420(Light) CompositeExtract 476 4
             534:     36(ptr) AccessChain 473(param) 196
             535:   15(fvec3) CompositeExtract 533 0
             536:     16(ptr) AccessChain 534 157
                              Store 536 535
             537:    7(float) CompositeExtract 533 1
             538:      8(ptr) AccessChain 534 139
                              Store 538 537
             539:   15(fvec3) CompositeExtract 533 2
             540:     16(ptr) AccessChain 534 113
                              Store 540 539
             541:    7(float) CompositeExtract 533 3
             542:      8(ptr) AccessChain 534 205
                              Store 542 541
             543:   15(fvec3) CompositeExtract 533 4
             544:     16(ptr) AccessChain 534 196
                              Store 544 543
             545:    7(float) CompositeExtract 533 5
             546:      8(ptr) AccessChain 534 303
                              Store 546 545
             547:  420(Light) CompositeExtract 476 5
             548:     36(ptr) AccessChain 473(param) 303
             549:   15(fvec3) CompositeExtract 547 0
             550:     16(ptr) AccessChain 548 157
                              Store 550 549
             551:    7(float) CompositeExtract 547 1
             552:      8(ptr) AccessChain 548 139
                              Store 552 551
             553:   15(fvec3) CompositeExtract 547 2
             554:     16(ptr) AccessChain 548 113
                              Store 554 553
             555:    7(float) CompositeExtract 547 3
             556:      8(ptr) AccessChain 548 205
                              Store 556 555
             557:   15(fvec3) CompositeExtract 547 4
             558:     16(ptr) AccessChain 548 196
                              Store 558 557
             559:    7(float) CompositeExtract 547 5
             560:      8(ptr) AccessChain 548 303
                              Store 560 559
             561:  420(Light) CompositeExtract 476 6
             563:     36(ptr) AccessChain 473(param) 562
             564:   15(fvec3) CompositeExtract 561 0
             565:     16(ptr) AccessChain 563 157
                              Store 565 564
             566:    7(float) CompositeExtract 561 1
             567:      8(ptr) AccessChain 563 139
                              Store 567 566
             568:   15(fvec3) CompositeExtract 561 2
             569:     16(ptr) AccessChain 563 113
                              Store 569 568
             570:    7(float) CompositeExtract 561 3
             571:      8(ptr) AccessChain 563 205
                              Store 571 570
             572:   15(fvec3) CompositeExtract 561 4
             573:     16(ptr) AccessChain 563 196
                              Store 573 572
             574:    7(float) CompositeExtract 561 5
             575:      8(ptr) AccessChain 563 303
                              Store 575 574
             576:  420(Light) CompositeExtract 476 7
             578:     36(ptr) AccessChain 473(param) 577
             579:   15(fvec3) CompositeExtract 576 0
             580:     16(ptr) AccessChain 578 157
                              Store 580 579
             581:    7(float) CompositeExtract 576 1
             582:      8(ptr) AccessChain 578 139
                              Store 582 581
             583:   15(fvec3) CompositeExtract 576 2
             584:     16(ptr) AccessChain 578 113
                              Store 584 583
             585:    7(float) CompositeExtract 576 3
             586:      8(ptr) AccessChain 578 205
                              Store 586 585
             587:   15(fvec3) CompositeExtract 576 4
             588:     16(ptr) AccessChain 578 196
                              Store 588 587
             589:    7(float) CompositeExtract 576 5
             590:      8(ptr) AccessChain 578 303
                              Store 590 589
             591:  420(Light) CompositeExtract 476 8
             593:     36(ptr) AccessChain 473(param) 592
             594:   15(fvec3) CompositeExtract 591 0
             595:     16(ptr) AccessChain 593 157
                              Store 595 594
             596:    7(float) CompositeExtract 591 1
             597:      8(ptr) AccessChain 593 139
                              Store 597 596
             598:   15(fvec3) CompositeExtract 591 2
             599:     16(ptr) AccessChain 593 113
                              Store 599 598
             600:    7(float) CompositeExtract 591 3
             601:      8(ptr) AccessChain 593 205
                              Store 601 600
             602:   15(fvec3) CompositeExtract 591 4
             603:     16(ptr) AccessChain 593 196
                              Store 603 602
             604:    7(float) CompositeExtract 591 5
             605:      8(ptr) AccessChain 593 303
                              Store 605 604
             606:  420(Light) CompositeExtract 476 9
             608:     36(ptr) AccessChain 473(param) 607
             609:   15(fvec3) CompositeExtract 606 0
             610:     16(ptr) AccessChain 608 157
                              Store 610 609
             611:    7(float) CompositeExtract 606 1
             612:      8(ptr) AccessChain 608 139
                              Store 612 611
             613:   15(fvec3) CompositeExtract 606 2
             614:     16(ptr) AccessChain 608 113
                              Store 614 613
             615:    7(float) CompositeExtract 606 3
             616:      8(ptr) AccessChain 608 205
                              Store 616 615
             617:   15(fvec3) CompositeExtract 606 4
             618:     16(ptr) AccessChain 608 196
                              Store 618 617
             619:    7(float) CompositeExtract 606 5
             620:      8(ptr) AccessChain 608 303
                              Store 620 619
             621:  420(Light) CompositeExtract 476 10
             623:     36(ptr) AccessChain 473(param) 622
             624:   15(fvec3) CompositeExtract 621 0
             625:     16(ptr) AccessChain 623 157
                              Store 625 624
             626:    7(float) CompositeExtract 621 1
             627:      8(ptr) AccessChain 623 139
                              Store 627 626
             628:   15(fvec3) CompositeExtract 621 2
             629:     16(ptr) AccessChain 623 113
                              Store 629 628
             630:    7(float) CompositeExtract 621 3
             631:      8(ptr) AccessChain 623 205
                              Store 631 630
             632:   15(fvec3) CompositeExtract 621 4
             633:     16(ptr) AccessChain 623 196
                              Store 633 632
             634:    7(float) CompositeExtract 621 5
             635:      8(ptr) AccessChain 623 303
                              Store 635 634
             636:  420(Light) CompositeExtract 476 11
             638:     36(ptr) AccessChain 473(param) 637
             639:   15(fvec3) CompositeExtract 636 0
             640:     16(ptr) AccessChain 638 157
                              Store 640 639
             641:    7(float) CompositeExtract 636 1
             642:      8(ptr) AccessChain 638 139
                              Store 642 641
             643:   15(fvec3) CompositeExtract 636 2
             644:     16(ptr) AccessChain 638 113
                              Store 644 643
             645:    7(float) CompositeExtract 636 3
             646:      8(ptr) AccessChain 638 205
                              Store 646 645
             647:   15(fvec3) CompositeExtract 636 4
             648:     16(ptr) AccessChain 638 196
                              Store 648 647
             649:    7(float) CompositeExtract 636 5
             650:      8(ptr) AccessChain 638 303
                              Store 650 649
             651:  420(Light) CompositeExtract 476 12
             653:     36(ptr) AccessChain 473(param) 652
             654:   15(fvec3) CompositeExtract 651 0
             655:     16(ptr) AccessChain 653 157
                              Store 655 654
             656:    7(float) CompositeExtract 651 1
             657:      8(ptr) AccessChain 653 139
                              Store 657 656
             658:   15(fvec3) CompositeExtract 651 2
             659:     16(ptr) AccessChain 653 113
                              Store 659 658
             660:    7(float) CompositeExtract 651 3
             661:      8(ptr) AccessChain 653 205
                              Store 661 660
             662:   15(fvec3) CompositeExtract 651 4
             663:     16(ptr) AccessChain 653 196
                              Store 663 662
             664:    7(float) CompositeExtract 651 5
             665:      8(ptr) AccessChain 653 303
                              Store 665 664
             666:  420(Light) CompositeExtract 476 13
             668:     36(ptr) AccessChain 473(param) 667
             669:   15(fvec3) CompositeExtract 666 0
             670:     16(ptr) AccessChain 668 157
                              Store 670 669
             671:    7(float) CompositeExtract 666 1
             672:      8(ptr) AccessChain 668 139
                              Store 672 671
             673:   15(fvec3) CompositeExtract 666 2
             674:     16(ptr) AccessChain 668 113
                              Store 674 673
             675:    7(float) CompositeExtract 666 3
             676:      8(ptr) AccessChain 668 205
                              Store 676 675
             677:   15(fvec3) CompositeExtract 666 4
             678:     16(ptr) AccessChain 668 196
                              Store 678 677
             679:    7(float) CompositeExtract 666 5
             680:      8(ptr) AccessChain 668 303
                              Store 680 679
             681:  420(Light) CompositeExtract 476 14
             683:     36(ptr) AccessChain 473(param) 682
             684:   15(fvec3) CompositeExtract 681 0
             685:     16(ptr) AccessChain 683 157
                              Store 685 684
             686:    7(float) CompositeExtract 681 1
             687:      8(ptr) AccessChain 683 139
                              Store 687 686
             688:   15(fvec3) CompositeExtract 681 2
             689:     16(ptr) AccessChain 683 113
                              Store 689 688
             690:    7(float) CompositeExtract 681 3
             691:      8(ptr) AccessChain 683 205
                              Store 691 690
             692:   15(fvec3) CompositeExtract 681 4
             693:     16(ptr) AccessChain 683 196
                              Store 693 692
             694:    7(float) CompositeExtract 681 5
             695:      8(ptr) AccessChain 683 303
                              Store 695 694
             696:  420(Light) CompositeExtract 476 15
             698:     36(ptr) AccessChain 473(param) 697
             699:   15(fvec3) CompositeExtract 696 0
             700:     16(ptr) AccessChain 698 157
                              Store 700 699
             701:    7(float) CompositeExtract 696 1
             702:      8(ptr) AccessChain 698 139
                              Store 702 701
             703:   15(fvec3) CompositeExtract 696 2
             704:     16(ptr) AccessChain 698 113
                              Store 704 703
             705:    7(float) CompositeExtract 696 3
             706:      8(ptr) AccessChain 698 205
                              Store 706 705
             707:   15(fvec3) CompositeExtract 696 4
             708:     16(ptr) AccessChain 698 196
                              Store 708 707
             709:    7(float) CompositeExtract 696 5
             710:      8(ptr) AccessChain 698 303
                              Store 710 709
             712:25(Material) Load 433(mat)
                              Store 711(param) 712
             714:   23(fvec4) Load 429(v_wPos)
             715:   15(fvec3) VectorShuffle 714 714 0 1 2
                              Store 713(param) 715
             717:   15(fvec3) Load 414(normal)
                              Store 716(param) 717
             719:   23(fvec4) Load 419(toEyeW)
             720:   15(fvec3) VectorShuffle 719 719 0 1 2
                              Store 718(param) 720
             722:   15(fvec3) Load 470(shadowFactor)
                              Store 721(param) 722
             723:   23(fvec4) FunctionCall 70(ComputeLighting(struct-Light-vf3-f1-vf3-f1-vf3-f11[16];struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;vf3;) 473(param) 711(param) 713(param) 716(param) 718(param) 721(param)
                              Store 472(directLight) 723
                              Line 1 210 0
             725:   23(fvec4) Load 464(ambient)
             726:   23(fvec4) Load 472(directLight)
             727:   23(fvec4) FAdd 725 726
                              Store 724(litColor) 727
                              Line 1 213 0
             729:      8(ptr) AccessChain 433(mat) 157 728
             730:    7(float) Load 729
             731:      8(ptr) AccessChain 724(litColor) 728
                              Store 731 730
                              Line 1 215 0
             734:   23(fvec4) Load 724(litColor)
                              Store 733(o_Color) 734
                              Return
                              FunctionEnd
13(CalcAttenuation(f1;f1;f1;):    7(float) Function None 9
           10(d):      8(ptr) FunctionParameter
11(falloffStart):      8(ptr) FunctionParameter
  12(falloffEnd):      8(ptr) FunctionParameter
              14:             Label
                              Line 1 34 0
              72:    7(float) Load 12(falloffEnd)
              73:    7(float) Load 10(d)
              74:    7(float) FSub 72 73
              75:    7(float) Load 12(falloffEnd)
              76:    7(float) Load 11(falloffStart)
              77:    7(float) FSub 75 76
              78:    7(float) FDiv 74 77
              81:    7(float) ExtInst 2(GLSL.std.450) 43(FClamp) 78 79 80
                              ReturnValue 81
                              FunctionEnd
21(SchlickFresnel(vf3;vf3;vf3;):   15(fvec3) Function None 17
          18(R0):     16(ptr) FunctionParameter
      19(normal):     16(ptr) FunctionParameter
    20(lightVec):     16(ptr) FunctionParameter
              22:             Label
84(cosIncidentAngle):      8(ptr) Variable Function
          89(f0):      8(ptr) Variable Function
92(reflectPercent):     16(ptr) Variable Function
                              Line 1 42 0
              85:   15(fvec3) Load 19(normal)
              86:   15(fvec3) Load 20(lightVec)
              87:    7(float) Dot 85 86
              88:    7(float) ExtInst 2(GLSL.std.450) 43(FClamp) 87 79 80
                              Store 84(cosIncidentAngle) 88
                              Line 1 43 0
              90:    7(float) Load 84(cosIncidentAngle)
              91:    7(float) FSub 80 90
                              Store 89(f0) 91
                              Line 1 44 0
              93:   15(fvec3) Load 18(R0)
              94:   15(fvec3) Load 18(R0)
              95:   15(fvec3) CompositeConstruct 80 80 80
              96:   15(fvec3) FSub 95 94
              97:    7(float) Load 89(f0)
              98:    7(float) Load 89(f0)
              99:    7(float) FMul 97 98
             100:    7(float) Load 89(f0)
             101:    7(float) FMul 99 100
             102:    7(float) Load 89(f0)
             103:    7(float) FMul 101 102
             104:    7(float) Load 89(f0)
             105:    7(float) FMul 103 104
             106:   15(fvec3) VectorTimesScalar 96 105
             107:   15(fvec3) FAdd 93 106
                              Store 92(reflectPercent) 107
                              Line 1 45 0
             108:   15(fvec3) Load 92(reflectPercent)
                              ReturnValue 108
                              FunctionEnd
33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;):   15(fvec3) Function None 27
28(lightStrength):     16(ptr) FunctionParameter
    29(lightVec):     16(ptr) FunctionParameter
      30(normal):     16(ptr) FunctionParameter
       31(toEye):     16(ptr) FunctionParameter
         32(mat):     26(ptr) FunctionParameter
              34:             Label
  111(shininess):      8(ptr) Variable Function
          117(m):      8(ptr) Variable Function
    121(halfVec):     16(ptr) Variable Function
126(roughnessFactor):      8(ptr) Variable Function
138(fresnelFactor):     16(ptr) Variable Function
      140(param):     16(ptr) Variable Function
      143(param):     16(ptr) Variable Function
      145(param):     16(ptr) Variable Function
 148(specAlbedo):     16(ptr) Variable Function
                              Line 1 51 0
             114:      8(ptr) AccessChain 32(mat) 113
             115:    7(float) Load 114
             116:    7(float) FSub 80 115
                              Store 111(shininess) 116
                              Line 1 52 0
             118:    7(float) Load 111(shininess)
             120:    7(float) FMul 118 119
                              Store 117(m) 120
                              Line 1 53 0
             122:   15(fvec3) Load 31(toEye)
             123:   15(fvec3) Load 29(lightVec)
             124:   15(fvec3) FAdd 122 123
             125:   15(fvec3) ExtInst 2(GLSL.std.450) 69(Normalize) 124
                              Store 121(halfVec) 125
                              Line 1 55 0
             127:    7(float) Load 117(m)
             129:    7(float) FAdd 127 128
             130:   15(fvec3) Load 121(halfVec)
             131:   15(fvec3) Load 30(normal)
             132:    7(float) Dot 130 131
             133:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 132 79
             134:    7(float) Load 117(m)
             135:    7(float) ExtInst 2(GLSL.std.450) 26(Pow) 133 134
             136:    7(float) FMul 129 135
             137:    7(float) FDiv 136 128
                              Store 126(roughnessFactor) 137
                              Line 1 56 0
             141:     16(ptr) AccessChain 32(mat) 139
             142:   15(fvec3) Load 141
                              Store 140(param) 142
             144:   15(fvec3) Load 121(halfVec)
                              Store 143(param) 144
             146:   15(fvec3) Load 29(lightVec)
                              Store 145(param) 146
             147:   15(fvec3) FunctionCall 21(SchlickFresnel(vf3;vf3;vf3;) 140(param) 143(param) 145(param)
                              Store 138(fresnelFactor) 147
                              Line 1 58 0
             149:   15(fvec3) Load 138(fresnelFactor)
             150:    7(float) Load 126(roughnessFactor)
             151:   15(fvec3) VectorTimesScalar 149 150
                              Store 148(specAlbedo) 151
                              Line 1 62 0
             152:   15(fvec3) Load 148(specAlbedo)
             153:   15(fvec3) Load 148(specAlbedo)
             154:   15(fvec3) CompositeConstruct 80 80 80
             155:   15(fvec3) FAdd 153 154
             156:   15(fvec3) FDiv 152 155
                              Store 148(specAlbedo) 156
                              Line 1 63 0
             159:    158(ptr) AccessChain 32(mat) 157
             160:   23(fvec4) Load 159
             161:   15(fvec3) VectorShuffle 160 160 0 1 2
             162:   15(fvec3) Load 148(specAlbedo)
             163:   15(fvec3) FAdd 161 162
             164:   15(fvec3) Load 28(lightStrength)
             165:   15(fvec3) FMul 163 164
                              ReturnValue 165
                              FunctionEnd
42(ComputeDirectionalLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;):   15(fvec3) Function None 37
           38(L):     36(ptr) FunctionParameter
         39(mat):     26(ptr) FunctionParameter
      40(normal):     16(ptr) FunctionParameter
       41(toEye):     16(ptr) FunctionParameter
              43:             Label
   168(lightVec):     16(ptr) Variable Function
      172(ndotl):      8(ptr) Variable Function
177(lightStrength):     16(ptr) Variable Function
      182(param):     16(ptr) Variable Function
      184(param):     16(ptr) Variable Function
      186(param):     16(ptr) Variable Function
      188(param):     16(ptr) Variable Function
      190(param):     26(ptr) Variable Function
                              Line 1 69 0
             169:     16(ptr) AccessChain 38(L) 113
             170:   15(fvec3) Load 169
             171:   15(fvec3) FNegate 170
                              Store 168(lightVec) 171
                              Line 1 72 0
             173:   15(fvec3) Load 168(lightVec)
             174:   15(fvec3) Load 40(normal)
             175:    7(float) Dot 173 174
             176:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 175 79
                              Store 172(ndotl) 176
                              Line 1 73 0
             178:     16(ptr) AccessChain 38(L) 157
             179:   15(fvec3) Load 178
             180:    7(float) Load 172(ndotl)
             181:   15(fvec3) VectorTimesScalar 179 180
                              Store 177(lightStrength) 181
                              Line 1 74 0
             183:   15(fvec3) Load 177(lightStrength)
                              Store 182(param) 183
             185:   15(fvec3) Load 168(lightVec)
                              Store 184(param) 185
             187:   15(fvec3) Load 40(normal)
                              Store 186(param) 187
             189:   15(fvec3) Load 41(toEye)
                              Store 188(param) 189
             191:25(Material) Load 39(mat)
                              Store 190(param) 191
             192:   15(fvec3) FunctionCall 33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;) 182(param) 184(param) 186(param) 188(param) 190(param)
                              ReturnValue 192
                              FunctionEnd
50(ComputePointLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;):   15(fvec3) Function None 44
           45(L):     36(ptr) FunctionParameter
         46(mat):     26(ptr) FunctionParameter
         47(pos):     16(ptr) FunctionParameter
      48(normal):     16(ptr) FunctionParameter
       49(toEye):     16(ptr) FunctionParameter
              51:             Label
   195(lightVec):     16(ptr) Variable Function
          201(d):      8(ptr) Variable Function
      218(ndotl):      8(ptr) Variable Function
223(lightStrength):     16(ptr) Variable Function
        228(att):      8(ptr) Variable Function
      229(param):      8(ptr) Variable Function
      231(param):      8(ptr) Variable Function
      234(param):      8(ptr) Variable Function
      241(param):     16(ptr) Variable Function
      243(param):     16(ptr) Variable Function
      245(param):     16(ptr) Variable Function
      247(param):     16(ptr) Variable Function
      249(param):     26(ptr) Variable Function
                              Line 1 80 0
             197:     16(ptr) AccessChain 45(L) 196
             198:   15(fvec3) Load 197
             199:   15(fvec3) Load 47(pos)
             200:   15(fvec3) FSub 198 199
                              Store 195(lightVec) 200
                              Line 1 83 0
             202:   15(fvec3) Load 195(lightVec)
             203:    7(float) ExtInst 2(GLSL.std.450) 66(Length) 202
                              Store 201(d) 203
                              Line 1 86 0
             204:    7(float) Load 201(d)
             206:      8(ptr) AccessChain 45(L) 205
             207:    7(float) Load 206
             209:   208(bool) FOrdGreaterThan 204 207
                              SelectionMerge 211 None
                              BranchConditional 209 210 211
             210:               Label
                                Line 1 87 0
                                ReturnValue 212
             211:             Label
                              Line 1 90 0
             214:    7(float) Load 201(d)
             215:   15(fvec3) Load 195(lightVec)
             216:   15(fvec3) CompositeConstruct 214 214 214
             217:   15(fvec3) FDiv 215 216
                              Store 195(lightVec) 217
                              Line 1 93 0
             219:   15(fvec3) Load 195(lightVec)
             220:   15(fvec3) Load 48(normal)
             221:    7(float) Dot 219 220
             222:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 221 79
                              Store 218(ndotl) 222
                              Line 1 94 0
             224:     16(ptr) AccessChain 45(L) 157
             225:   15(fvec3) Load 224
             226:    7(float) Load 218(ndotl)
             227:   15(fvec3) VectorTimesScalar 225 226
                              Store 223(lightStrength) 227
                              Line 1 97 0
             230:    7(float) Load 201(d)
                              Store 229(param) 230
             232:      8(ptr) AccessChain 45(L) 139
             233:    7(float) Load 232
                              Store 231(param) 233
             235:      8(ptr) AccessChain 45(L) 205
             236:    7(float) Load 235
                              Store 234(param) 236
             237:    7(float) FunctionCall 13(CalcAttenuation(f1;f1;f1;) 229(param) 231(param) 234(param)
                              Store 228(att) 237
                              Line 1 98 0
             238:    7(float) Load 228(att)
             239:   15(fvec3) Load 223(lightStrength)
             240:   15(fvec3) VectorTimesScalar 239 238
                              Store 223(lightStrength) 240
                              Line 1 100 0
             242:   15(fvec3) Load 223(lightStrength)
                              Store 241(param) 242
             244:   15(fvec3) Load 195(lightVec)
                              Store 243(param) 244
             246:   15(fvec3) Load 48(normal)
                              Store 245(param) 246
             248:   15(fvec3) Load 49(toEye)
                              Store 247(param) 248
             250:25(Material) Load 46(mat)
                              Store 249(param) 250
             251:   15(fvec3) FunctionCall 33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;) 241(param) 243(param) 245(param) 247(param) 249(param)
                              ReturnValue 251
                              FunctionEnd
57(ComputeSpotLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;):   15(fvec3) Function None 44
           52(L):     36(ptr) FunctionParameter
         53(mat):     26(ptr) FunctionParameter
         54(pos):     16(ptr) FunctionParameter
      55(normal):     16(ptr) FunctionParameter
       56(toEye):     16(ptr) FunctionParameter
              58:             Label
   254(lightVec):     16(ptr) Variable Function
          259(d):      8(ptr) Variable Function
      273(ndotl):      8(ptr) Variable Function
278(lightStrength):     16(ptr) Variable Function
        283(att):      8(ptr) Variable Function
      284(param):      8(ptr) Variable Function
      286(param):      8(ptr) Variable Function
      289(param):      8(ptr) Variable Function
 296(spotFactor):      8(ptr) Variable Function
      310(param):     16(ptr) Variable Function
      312(param):     16(ptr) Variable Function
      314(param):     16(ptr) Variable Function
      316(param):     16(ptr) Variable Function
      318(param):     26(ptr) Variable Function
                              Line 1 106 0
             255:     16(ptr) AccessChain 52(L) 196
             256:   15(fvec3) Load 255
             257:   15(fvec3) Load 54(pos)
             258:   15(fvec3) FSub 256 257
                              Store 254(lightVec) 258
                              Line 1 109 0
             260:   15(fvec3) Load 254(lightVec)
             261:    7(float) ExtInst 2(GLSL.std.450) 66(Length) 260
                              Store 259(d) 261
                              Line 1 112 0
             262:    7(float) Load 259(d)
             263:      8(ptr) AccessChain 52(L) 205
             264:    7(float) Load 263
             265:   208(bool) FOrdGreaterThan 262 264
                              SelectionMerge 267 None
                              BranchConditional 265 266 267
             266:               Label
                                Line 1 113 0
                                ReturnValue 212
             267:             Label
                              Line 1 116 0
             269:    7(float) Load 259(d)
             270:   15(fvec3) Load 254(lightVec)
             271:   15(fvec3) CompositeConstruct 269 269 269
             272:   15(fvec3) FDiv 270 271
                              Store 254(lightVec) 272
                              Line 1 119 0
             274:   15(fvec3) Load 254(lightVec)
             275:   15(fvec3) Load 55(normal)
             276:    7(float) Dot 274 275
             277:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 276 79
                              Store 273(ndotl) 277
                              Line 1 120 0
             279:     16(ptr) AccessChain 52(L) 157
             280:   15(fvec3) Load 279
             281:    7(float) Load 273(ndotl)
             282:   15(fvec3) VectorTimesScalar 280 281
                              Store 278(lightStrength) 282
                              Line 1 123 0
             285:    7(float) Load 259(d)
                              Store 284(param) 285
             287:      8(ptr) AccessChain 52(L) 139
             288:    7(float) Load 287
                              Store 286(param) 288
             290:      8(ptr) AccessChain 52(L) 205
             291:    7(float) Load 290
                              Store 289(param) 291
             292:    7(float) FunctionCall 13(CalcAttenuation(f1;f1;f1;) 284(param) 286(param) 289(param)
                              Store 283(att) 292
                              Line 1 124 0
             293:    7(float) Load 283(att)
             294:   15(fvec3) Load 278(lightStrength)
             295:   15(fvec3) VectorTimesScalar 294 293
                              Store 278(lightStrength) 295
                              Line 1 127 0
             297:   15(fvec3) Load 254(lightVec)
             298:   15(fvec3) FNegate 297
             299:     16(ptr) AccessChain 52(L) 113
             300:   15(fvec3) Load 299
             301:    7(float) Dot 298 300
             302:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 301 79
             304:      8(ptr) AccessChain 52(L) 303
             305:    7(float) Load 304
             306:    7(float) ExtInst 2(GLSL.std.450) 26(Pow) 302 305
                              Store 296(spotFactor) 306
                              Line 1 128 0
             307:    7(float) Load 296(spotFactor)
             308:   15(fvec3) Load 278(lightStrength)
             309:   15(fvec3) VectorTimesScalar 308 307
                              Store 278(lightStrength) 309
                              Line 1 130 0
             311:   15(fvec3) Load 278(lightStrength)
                              Store 310(param) 311
             313:   15(fvec3) Load 254(lightVec)
                              Store 312(param) 313
             315:   15(fvec3) Load 55(normal)
                              Store 314(param) 315
             317:   15(fvec3) Load 56(toEye)
                              Store 316(param) 317
             319:25(Material) Load 53(mat)
                              Store 318(param) 319
             320:   15(fvec3) FunctionCall 33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;) 310(param) 312(param) 314(param) 316(param) 318(param)
                              ReturnValue 320
                              FunctionEnd
70(ComputeLighting(struct-Light-vf3-f1-vf3-f1-vf3-f11[16];struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;vf3;):   23(fvec4) Function None 63
     64(gLights):     62(ptr) FunctionParameter
         65(mat):     26(ptr) FunctionParameter
         66(pos):     16(ptr) FunctionParameter
      67(normal):     16(ptr) FunctionParameter
       68(toEye):     16(ptr) FunctionParameter
69(shadowFactor):     16(ptr) FunctionParameter
              71:             Label
     323(result):     16(ptr) Variable Function
          325(i):    324(ptr) Variable Function
      338(param):     36(ptr) Variable Function
      341(param):     26(ptr) Variable Function
      343(param):     16(ptr) Variable Function
      345(param):     16(ptr) Variable Function
      363(param):     36(ptr) Variable Function
      366(param):     26(ptr) Variable Function
      368(param):     16(ptr) Variable Function
      370(param):     16(ptr) Variable Function
      372(param):     16(ptr) Variable Function
      391(param):     36(ptr) Variable Function
      394(param):     26(ptr) Variable Function
      396(param):     16(ptr) Variable Function
      398(param):     16(ptr) Variable Function
      400(param):     16(ptr) Variable Function
                              Line 1 135 0
                              Store 323(result) 212
                              Line 1 136 0
                              Store 325(i) 157
                              Line 1 139 0
                              Store 325(i) 157
                              Branch 326
             326:             Label
                              LoopMerge 328 329 None
                              Branch 330
             330:             Label
             331:    112(int) Load 325(i)
             333:   208(bool) SLessThan 331 332(NUM_DIR_LIGHTS)
                              BranchConditional 333 327 328
             327:               Label
                                Line 1 141 0
             334:    112(int)   Load 325(i)
             335:      8(ptr)   AccessChain 69(shadowFactor) 334
             336:    7(float)   Load 335
             337:    112(int)   Load 325(i)
             339:     36(ptr)   AccessChain 64(gLights) 337
             340:   35(Light)   Load 339
                                Store 338(param) 340
             342:25(Material)   Load 65(mat)
                                Store 341(param) 342
             344:   15(fvec3)   Load 67(normal)
                                Store 343(param) 344
             346:   15(fvec3)   Load 68(toEye)
                                Store 345(param) 346
             347:   15(fvec3)   FunctionCall 42(ComputeDirectionalLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;) 338(param) 341(param) 343(param) 345(param)
             348:   15(fvec3)   VectorTimesScalar 347 336
             349:   15(fvec3)   Load 323(result)
             350:   15(fvec3)   FAdd 349 348
                                Store 323(result) 350
                                Branch 329
             329:               Label
                                Line 1 139 0
             351:    112(int)   Load 325(i)
             352:    112(int)   IAdd 351 139
                                Store 325(i) 352
                                Branch 326
             328:             Label
                              Line 1 144 0
                              Store 325(i) 332(NUM_DIR_LIGHTS)
                              Branch 353
             353:             Label
                              LoopMerge 355 356 None
                              Branch 357
             357:             Label
             358:    112(int) Load 325(i)
             361:   208(bool) SLessThan 358 360
                              BranchConditional 361 354 355
             354:               Label
                                Line 1 146 0
             362:    112(int)   Load 325(i)
             364:     36(ptr)   AccessChain 64(gLights) 362
             365:   35(Light)   Load 364
                                Store 363(param) 365
             367:25(Material)   Load 65(mat)
                                Store 366(param) 367
             369:   15(fvec3)   Load 66(pos)
                                Store 368(param) 369
             371:   15(fvec3)   Load 67(normal)
                                Store 370(param) 371
             373:   15(fvec3)   Load 68(toEye)
                                Store 372(param) 373
             374:   15(fvec3)   FunctionCall 50(ComputePointLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;) 363(param) 366(param) 368(param) 370(param) 372(param)
             375:   15(fvec3)   Load 323(result)
             376:   15(fvec3)   FAdd 375 374
                                Store 323(result) 376
                                Branch 356
             356:               Label
                                Line 1 144 0
             377:    112(int)   Load 325(i)
             378:    112(int)   IAdd 377 139
                                Store 325(i) 378
                                Branch 353
             355:             Label
                              Line 1 149 0
                              Store 325(i) 379
                              Branch 380
             380:             Label
                              LoopMerge 382 383 None
                              Branch 384
             384:             Label
             385:    112(int) Load 325(i)
             389:   208(bool) SLessThan 385 388
                              BranchConditional 389 381 382
             381:               Label
                                Line 1 151 0
             390:    112(int)   Load 325(i)
             392:     36(ptr)   AccessChain 64(gLights) 390
             393:   35(Light)   Load 392
                                Store 391(param) 393
             395:25(Material)   Load 65(mat)
                                Store 394(param) 395
             397:   15(fvec3)   Load 66(pos)
                                Store 396(param) 397
             399:   15(fvec3)   Load 67(normal)
                                Store 398(param) 399
             401:   15(fvec3)   Load 68(toEye)
                                Store 400(param) 401
             402:   15(fvec3)   FunctionCall 57(ComputeSpotLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;) 391(param) 394(param) 396(param) 398(param) 400(param)
             403:   15(fvec3)   Load 323(result)
             404:   15(fvec3)   FAdd 403 402
                                Store 323(result) 404
                                Branch 383
             383:               Label
                                Line 1 149 0
             405:    112(int)   Load 325(i)
             406:    112(int)   IAdd 405 139
                                Store 325(i) 406
                                Branch 380
             382:             Label
                              Line 1 154 0
             407:   15(fvec3) Load 323(result)
             408:    7(float) CompositeExtract 407 0
             409:    7(float) CompositeExtract 407 1
             410:    7(float) CompositeExtract 407 2
             411:   23(fvec4) CompositeConstruct 408 409 410 79
                              ReturnValue 411
                              FunctionEnd
