Lit.frag
// Module Version 10000
// Generated by (magic number): 80008
// Id's are bound by 531

                              Capability Shader
               2:             ExtInstImport  "GLSL.std.450"
                              MemoryModel Logical GLSL450
                              EntryPoint Fragment 5  "main" 455 463 493 529
                              ExecutionMode 5 OriginUpperLeft
               1:             String  "Lit.frag"
                              Source GLSL 450 1  "// OpModuleProcessed client vulkan100
// OpModuleProcessed target-env vulkan1.0
// OpModuleProcessed entry-point main
#line 1
#version 450

/////////////////////////////////////////////////////
// Light
/////////////////////////////////////////////////////

#define MaxLights 16

layout (constant_id = 0) const int NUM_DIR_LIGHTS = 0;
layout (constant_id = 1) const int NUM_POINT_LIGHTS = 0;
layout (constant_id = 2) const int NUM_SPOT_LIGHTS = 0;

struct Light
{
	vec3 strength; // light color
	float falloffStart; // point/spot light only
	vec3 direction;// directional/spot lightonly
	float falloffEnd; // point/spot light only
	vec3 position; // point/spot light only
	float spotPower; // spot light only
};

struct Material
{
	vec4 diffuseAlbedo;
	vec3 fresnelR0;
	float roughness;
	mat4 matTransform;
};

/////////////////////////////////////////////////////
// Uniform
/////////////////////////////////////////////////////

layout(set=1, binding=0) uniform PerView {
    mat4 view;
    mat4 proj;
	vec4 eyePos;
	
	vec4 ambientLight;
	// Indices [0, NUM_DIR_LIGHTS) are directional lights;
	// indices [NUM_DIR_LIGHTS, NUM_DIR_LIGHTS+NUM_POINT_LIGHTS) are
	// point lights;
	// indices [NUM_DIR_LIGHTS+NUM_POINT_LIGHTS,
	// NUM_DIR_LIGHTS+NUM_POINT_LIGHT+NUM_SPOT_LIGHTS)
	// are spot lights for a maximum of MaxLights per object.
	Light lights[MaxLights];
};

layout(set=2, binding=0) uniform PerMaterial{
	Material gMaterial;
};

layout(set=2, binding=1) uniform sampler2D baseTexture;

/////////////////////////////////////////////////////
// Function
/////////////////////////////////////////////////////

float CalcAttenuation(float d, float falloffStart, float falloffEnd)
{
	// Linear falloff.
	return clamp((falloffEnd - d) / (falloffEnd - falloffStart), 0.0f, 1.0f);
}

// Schlick gives an approximation to Fresne reflectance
// (see pg. 233 “Real-Time Rendering 3rd Ed.”).
// R0 = ( (n-1)/(n+1) )^2, where n is the index of refraction.
vec3 SchlickFresnel(vec3 R0, vec3 normal, vec3 lightVec)
{
	float cosIncidentAngle = clamp(dot(normal, lightVec), 0.0f, 1.0f);
	float f0 = 1.0f - cosIncidentAngle;
	vec3 reflectPercent = R0 + (1.0f - R0)* (f0*f0*f0*f0*f0);
	return reflectPercent;
}

vec3 BlinnPhong(vec3 lightStrength, vec3 lightVec, vec3 normal, vec3 toEye, Material mat)
{
	// Derive m from the shininess, which is derived from the roughness.
	const float shininess = 1.0f - mat.roughness;
	const float m = shininess * 256.0f;
	vec3 halfVec = normalize(toEye + lightVec);
	
	float roughnessFactor = (m + 8.0f)*pow(max(dot(halfVec, normal), 0.0f), m) / 8.0f;
	vec3 fresnelFactor = SchlickFresnel(mat.fresnelR0, halfVec, lightVec);
	
	vec3 specAlbedo = fresnelFactor*roughnessFactor;
	
	// Our spec formula goes outside [0,1] range, but we are doing
	// LDR rendering. So scale it down a bit.
	specAlbedo = specAlbedo / (specAlbedo + 1.0f);
	return (mat.diffuseAlbedo.rgb + specAlbedo) * lightStrength;
}

vec3 ComputeDirectionalLight(Light L, Material mat, vec3 normal, vec3 toEye)
{
	// The light vector aims opposite the direction the light rays travel.
	vec3 lightVec = -L.direction;
	
	// Scale light down by Lambert’s cosine law.
	float ndotl = max(dot(lightVec, normal), 0.0f);
	vec3 lightStrength = L.strength * ndotl;
	return BlinnPhong(lightStrength, lightVec, normal, toEye, mat);
}

vec3 ComputePointLight(Light L, Material mat, vec3 pos, vec3 normal, vec3 toEye)
{
	// The vector from the surface to the light.
	vec3 lightVec = L.position - pos;
	
	// The distance from surface to light.
	float d = length(lightVec);
	
	// Range test.
	if(d > L.falloffEnd)
	return vec3(0.0f, 0.0f, 0.0f);
	
	// Normalize the light vector.
	lightVec /= d;
	
	// Scale light down by Lambert’s cosine law.
	float ndotl = max(dot(lightVec, normal), 0.0f);
	vec3 lightStrength = L.strength * ndotl;
	
	// Attenuate light by distance.
	float att = CalcAttenuation(d, L.falloffStart, L.falloffEnd);
	lightStrength *= att;
	
	return BlinnPhong(lightStrength, lightVec, normal, toEye, mat);
}

vec3 ComputeSpotLight(Light L, Material mat, vec3 pos, vec3 normal, vec3 toEye)
{
	// The vector from the surface to the light.
	vec3 lightVec = L.position - pos;
	
	// The distance from surface to light.
	float d = length(lightVec);
	
	// Range test.
	if(d > L.falloffEnd)
	return vec3(0.0f, 0.0f, 0.0f);
	
	// Normalize the light vector.
	lightVec /= d;
	
	// Scale light down by Lambert’s cosine law.
	float ndotl = max(dot(lightVec, normal), 0.0f);
	vec3 lightStrength = L.strength * ndotl;
	
	// Attenuate light by distance.
	float att = CalcAttenuation(d, L.falloffStart, L.falloffEnd);
	lightStrength *= att;
	
	// Scale by spotlight
	float spotFactor = pow(max(dot(-lightVec, L.direction), 0.0f), L.spotPower);
	lightStrength *= spotFactor;
	
	return BlinnPhong(lightStrength, lightVec, normal, toEye, mat);
}

vec4 ComputeLighting(Material mat, vec3 pos, vec3 normal, vec3 toEye, vec3 shadowFactor)
{
	vec3 result = vec3(0.0f, 0.0f, 0.0f);
	int i = 0;


	for(i = 0; i < NUM_DIR_LIGHTS; ++i)
	{
		result += shadowFactor[i] * ComputeDirectionalLight(lights[i], mat, normal, toEye);
	}

	for(i = NUM_DIR_LIGHTS; i < NUM_DIR_LIGHTS+NUM_POINT_LIGHTS; ++i)
	{
		result += ComputePointLight(lights[i], mat, pos, normal, toEye);
	}

	for(i = NUM_DIR_LIGHTS + NUM_POINT_LIGHTS; i < NUM_DIR_LIGHTS + NUM_POINT_LIGHTS + NUM_SPOT_LIGHTS; ++i)
	{
		result += ComputeSpotLight(lights[i], mat, pos, normal, toEye);
	}

	return vec4(result, 0.0f);
}



layout(location = 0) in vec3 v_Normal;
layout(location = 1) in vec2 v_Texcoord;
layout(location = 2) in vec4 v_wPos;

layout(location = 0) out vec4 o_Color;

/////////////////////////////////////////////////////
// Shader
/////////////////////////////////////////////////////

void main() {

	// Interpolating normal can unnormalize it, so renormalize it.
	vec3 normal = normalize(v_Normal);
	
	// Vector from point being lit to eye.
	vec4 toEyeW = normalize(eyePos - v_wPos);
	
	// Material
	Material mat = gMaterial;
	mat.diffuseAlbedo = mat.diffuseAlbedo * texture(baseTexture, v_Texcoord);
	
	// Indirect lighting.
	vec4 ambient = ambientLight * mat.diffuseAlbedo;
	
	// Direct lighting.
	vec3 shadowFactor = vec3(1.0f, 1.0f, 1.0f);
	vec4 directLight = ComputeLighting(mat, v_wPos.xyz, normal, toEyeW.xyz, shadowFactor);
	vec4 litColor = ambient + directLight;
	
	// Common convention to take alpha from diffuse material.
	litColor.a = mat.diffuseAlbedo.a;

	o_Color = litColor;
}"
                              Name 5  "main"
                              Name 13  "CalcAttenuation(f1;f1;f1;"
                              Name 10  "d"
                              Name 11  "falloffStart"
                              Name 12  "falloffEnd"
                              Name 21  "SchlickFresnel(vf3;vf3;vf3;"
                              Name 18  "R0"
                              Name 19  "normal"
                              Name 20  "lightVec"
                              Name 25  "Material"
                              MemberName 25(Material) 0  "diffuseAlbedo"
                              MemberName 25(Material) 1  "fresnelR0"
                              MemberName 25(Material) 2  "roughness"
                              MemberName 25(Material) 3  "matTransform"
                              Name 33  "BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;"
                              Name 28  "lightStrength"
                              Name 29  "lightVec"
                              Name 30  "normal"
                              Name 31  "toEye"
                              Name 32  "mat"
                              Name 35  "Light"
                              MemberName 35(Light) 0  "strength"
                              MemberName 35(Light) 1  "falloffStart"
                              MemberName 35(Light) 2  "direction"
                              MemberName 35(Light) 3  "falloffEnd"
                              MemberName 35(Light) 4  "position"
                              MemberName 35(Light) 5  "spotPower"
                              Name 42  "ComputeDirectionalLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;"
                              Name 38  "L"
                              Name 39  "mat"
                              Name 40  "normal"
                              Name 41  "toEye"
                              Name 50  "ComputePointLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;"
                              Name 45  "L"
                              Name 46  "mat"
                              Name 47  "pos"
                              Name 48  "normal"
                              Name 49  "toEye"
                              Name 57  "ComputeSpotLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;"
                              Name 52  "L"
                              Name 53  "mat"
                              Name 54  "pos"
                              Name 55  "normal"
                              Name 56  "toEye"
                              Name 65  "ComputeLighting(struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;vf3;"
                              Name 60  "mat"
                              Name 61  "pos"
                              Name 62  "normal"
                              Name 63  "toEye"
                              Name 64  "shadowFactor"
                              Name 79  "cosIncidentAngle"
                              Name 84  "f0"
                              Name 87  "reflectPercent"
                              Name 106  "shininess"
                              Name 112  "m"
                              Name 116  "halfVec"
                              Name 121  "roughnessFactor"
                              Name 133  "fresnelFactor"
                              Name 135  "param"
                              Name 138  "param"
                              Name 140  "param"
                              Name 143  "specAlbedo"
                              Name 163  "lightVec"
                              Name 167  "ndotl"
                              Name 172  "lightStrength"
                              Name 177  "param"
                              Name 179  "param"
                              Name 181  "param"
                              Name 183  "param"
                              Name 185  "param"
                              Name 190  "lightVec"
                              Name 196  "d"
                              Name 213  "ndotl"
                              Name 218  "lightStrength"
                              Name 223  "att"
                              Name 224  "param"
                              Name 226  "param"
                              Name 229  "param"
                              Name 236  "param"
                              Name 238  "param"
                              Name 240  "param"
                              Name 242  "param"
                              Name 244  "param"
                              Name 249  "lightVec"
                              Name 254  "d"
                              Name 268  "ndotl"
                              Name 273  "lightStrength"
                              Name 278  "att"
                              Name 279  "param"
                              Name 281  "param"
                              Name 284  "param"
                              Name 291  "spotFactor"
                              Name 305  "param"
                              Name 307  "param"
                              Name 309  "param"
                              Name 311  "param"
                              Name 313  "param"
                              Name 318  "result"
                              Name 320  "i"
                              Name 327  "NUM_DIR_LIGHTS"
                              Name 332  "Light"
                              MemberName 332(Light) 0  "strength"
                              MemberName 332(Light) 1  "falloffStart"
                              MemberName 332(Light) 2  "direction"
                              MemberName 332(Light) 3  "falloffEnd"
                              MemberName 332(Light) 4  "position"
                              MemberName 332(Light) 5  "spotPower"
                              Name 336  "PerView"
                              MemberName 336(PerView) 0  "view"
                              MemberName 336(PerView) 1  "proj"
                              MemberName 336(PerView) 2  "eyePos"
                              MemberName 336(PerView) 3  "ambientLight"
                              MemberName 336(PerView) 4  "lights"
                              Name 338  ""
                              Name 340  "param"
                              Name 356  "param"
                              Name 358  "param"
                              Name 360  "param"
                              Name 374  "NUM_POINT_LIGHTS"
                              Name 378  "param"
                              Name 393  "param"
                              Name 395  "param"
                              Name 397  "param"
                              Name 399  "param"
                              Name 414  "NUM_SPOT_LIGHTS"
                              Name 418  "param"
                              Name 433  "param"
                              Name 435  "param"
                              Name 437  "param"
                              Name 439  "param"
                              Name 453  "normal"
                              Name 455  "v_Normal"
                              Name 458  "toEyeW"
                              Name 463  "v_wPos"
                              Name 467  "mat"
                              Name 468  "Material"
                              MemberName 468(Material) 0  "diffuseAlbedo"
                              MemberName 468(Material) 1  "fresnelR0"
                              MemberName 468(Material) 2  "roughness"
                              MemberName 468(Material) 3  "matTransform"
                              Name 469  "PerMaterial"
                              MemberName 469(PerMaterial) 0  "gMaterial"
                              Name 471  ""
                              Name 489  "baseTexture"
                              Name 493  "v_Texcoord"
                              Name 498  "ambient"
                              Name 504  "shadowFactor"
                              Name 506  "directLight"
                              Name 507  "param"
                              Name 509  "param"
                              Name 512  "param"
                              Name 514  "param"
                              Name 517  "param"
                              Name 520  "litColor"
                              Name 529  "o_Color"
                              Decorate 327(NUM_DIR_LIGHTS) SpecId 0
                              MemberDecorate 332(Light) 0 Offset 0
                              MemberDecorate 332(Light) 1 Offset 12
                              MemberDecorate 332(Light) 2 Offset 16
                              MemberDecorate 332(Light) 3 Offset 28
                              MemberDecorate 332(Light) 4 Offset 32
                              MemberDecorate 332(Light) 5 Offset 44
                              Decorate 335 ArrayStride 48
                              MemberDecorate 336(PerView) 0 ColMajor
                              MemberDecorate 336(PerView) 0 Offset 0
                              MemberDecorate 336(PerView) 0 MatrixStride 16
                              MemberDecorate 336(PerView) 1 ColMajor
                              MemberDecorate 336(PerView) 1 Offset 64
                              MemberDecorate 336(PerView) 1 MatrixStride 16
                              MemberDecorate 336(PerView) 2 Offset 128
                              MemberDecorate 336(PerView) 3 Offset 144
                              MemberDecorate 336(PerView) 4 Offset 160
                              Decorate 336(PerView) Block
                              Decorate 338 DescriptorSet 1
                              Decorate 338 Binding 0
                              Decorate 374(NUM_POINT_LIGHTS) SpecId 1
                              Decorate 414(NUM_SPOT_LIGHTS) SpecId 2
                              Decorate 455(v_Normal) Location 0
                              Decorate 463(v_wPos) Location 2
                              MemberDecorate 468(Material) 0 Offset 0
                              MemberDecorate 468(Material) 1 Offset 16
                              MemberDecorate 468(Material) 2 Offset 28
                              MemberDecorate 468(Material) 3 ColMajor
                              MemberDecorate 468(Material) 3 Offset 32
                              MemberDecorate 468(Material) 3 MatrixStride 16
                              MemberDecorate 469(PerMaterial) 0 Offset 0
                              Decorate 469(PerMaterial) Block
                              Decorate 471 DescriptorSet 2
                              Decorate 471 Binding 0
                              Decorate 489(baseTexture) DescriptorSet 2
                              Decorate 489(baseTexture) Binding 1
                              Decorate 493(v_Texcoord) Location 1
                              Decorate 529(o_Color) Location 0
               3:             TypeVoid
               4:             TypeFunction 3
               7:             TypeFloat 32
               8:             TypePointer Function 7(float)
               9:             TypeFunction 7(float) 8(ptr) 8(ptr) 8(ptr)
              15:             TypeVector 7(float) 3
              16:             TypePointer Function 15(fvec3)
              17:             TypeFunction 15(fvec3) 16(ptr) 16(ptr) 16(ptr)
              23:             TypeVector 7(float) 4
              24:             TypeMatrix 23(fvec4) 4
    25(Material):             TypeStruct 23(fvec4) 15(fvec3) 7(float) 24
              26:             TypePointer Function 25(Material)
              27:             TypeFunction 15(fvec3) 16(ptr) 16(ptr) 16(ptr) 16(ptr) 26(ptr)
       35(Light):             TypeStruct 15(fvec3) 7(float) 15(fvec3) 7(float) 15(fvec3) 7(float)
              36:             TypePointer Function 35(Light)
              37:             TypeFunction 15(fvec3) 36(ptr) 26(ptr) 16(ptr) 16(ptr)
              44:             TypeFunction 15(fvec3) 36(ptr) 26(ptr) 16(ptr) 16(ptr) 16(ptr)
              59:             TypeFunction 23(fvec4) 26(ptr) 16(ptr) 16(ptr) 16(ptr) 16(ptr)
              74:    7(float) Constant 0
              75:    7(float) Constant 1065353216
             107:             TypeInt 32 1
             108:    107(int) Constant 2
             114:    7(float) Constant 1132462080
             123:    7(float) Constant 1090519040
             134:    107(int) Constant 1
             152:    107(int) Constant 0
             153:             TypePointer Function 23(fvec4)
             191:    107(int) Constant 4
             200:    107(int) Constant 3
             203:             TypeBool
             207:   15(fvec3) ConstantComposite 74 74 74
             298:    107(int) Constant 5
             319:             TypePointer Function 107(int)
327(NUM_DIR_LIGHTS):    107(int) SpecConstant 0
      332(Light):             TypeStruct 15(fvec3) 7(float) 15(fvec3) 7(float) 15(fvec3) 7(float)
             333:             TypeInt 32 0
             334:    333(int) Constant 16
             335:             TypeArray 332(Light) 334
    336(PerView):             TypeStruct 24 24 23(fvec4) 23(fvec4) 335
             337:             TypePointer Uniform 336(PerView)
             338:    337(ptr) Variable Uniform
             341:             TypePointer Uniform 332(Light)
374(NUM_POINT_LIGHTS):    107(int) SpecConstant 0
             375:    107(int) SpecConstantOp 128 327(NUM_DIR_LIGHTS) 374(NUM_POINT_LIGHTS)
             406:    107(int) SpecConstantOp 128 327(NUM_DIR_LIGHTS) 374(NUM_POINT_LIGHTS)
             413:    107(int) SpecConstantOp 128 327(NUM_DIR_LIGHTS) 374(NUM_POINT_LIGHTS)
414(NUM_SPOT_LIGHTS):    107(int) SpecConstant 0
             415:    107(int) SpecConstantOp 128 413 414(NUM_SPOT_LIGHTS)
             454:             TypePointer Input 15(fvec3)
   455(v_Normal):    454(ptr) Variable Input
             459:             TypePointer Uniform 23(fvec4)
             462:             TypePointer Input 23(fvec4)
     463(v_wPos):    462(ptr) Variable Input
   468(Material):             TypeStruct 23(fvec4) 15(fvec3) 7(float) 24
469(PerMaterial):             TypeStruct 468(Material)
             470:             TypePointer Uniform 469(PerMaterial)
             471:    470(ptr) Variable Uniform
             472:             TypePointer Uniform 468(Material)
             482:             TypePointer Function 24
             486:             TypeImage 7(float) 2D sampled format:Unknown
             487:             TypeSampledImage 486
             488:             TypePointer UniformConstant 487
489(baseTexture):    488(ptr) Variable UniformConstant
             491:             TypeVector 7(float) 2
             492:             TypePointer Input 491(fvec2)
 493(v_Texcoord):    492(ptr) Variable Input
             505:   15(fvec3) ConstantComposite 75 75 75
             524:    333(int) Constant 3
             528:             TypePointer Output 23(fvec4)
    529(o_Color):    528(ptr) Variable Output
         5(main):           3 Function None 4
               6:             Label
     453(normal):     16(ptr) Variable Function
     458(toEyeW):    153(ptr) Variable Function
        467(mat):     26(ptr) Variable Function
    498(ambient):    153(ptr) Variable Function
504(shadowFactor):     16(ptr) Variable Function
506(directLight):    153(ptr) Variable Function
      507(param):     26(ptr) Variable Function
      509(param):     16(ptr) Variable Function
      512(param):     16(ptr) Variable Function
      514(param):     16(ptr) Variable Function
      517(param):     16(ptr) Variable Function
   520(litColor):    153(ptr) Variable Function
                              Line 1 201 0
             456:   15(fvec3) Load 455(v_Normal)
             457:   15(fvec3) ExtInst 2(GLSL.std.450) 69(Normalize) 456
                              Store 453(normal) 457
                              Line 1 204 0
             460:    459(ptr) AccessChain 338 108
             461:   23(fvec4) Load 460
             464:   23(fvec4) Load 463(v_wPos)
             465:   23(fvec4) FSub 461 464
             466:   23(fvec4) ExtInst 2(GLSL.std.450) 69(Normalize) 465
                              Store 458(toEyeW) 466
                              Line 1 207 0
             473:    472(ptr) AccessChain 471 152
             474:468(Material) Load 473
             475:   23(fvec4) CompositeExtract 474 0
             476:    153(ptr) AccessChain 467(mat) 152
                              Store 476 475
             477:   15(fvec3) CompositeExtract 474 1
             478:     16(ptr) AccessChain 467(mat) 134
                              Store 478 477
             479:    7(float) CompositeExtract 474 2
             480:      8(ptr) AccessChain 467(mat) 108
                              Store 480 479
             481:          24 CompositeExtract 474 3
             483:    482(ptr) AccessChain 467(mat) 200
                              Store 483 481
                              Line 1 208 0
             484:    153(ptr) AccessChain 467(mat) 152
             485:   23(fvec4) Load 484
             490:         487 Load 489(baseTexture)
             494:  491(fvec2) Load 493(v_Texcoord)
             495:   23(fvec4) ImageSampleImplicitLod 490 494
             496:   23(fvec4) FMul 485 495
             497:    153(ptr) AccessChain 467(mat) 152
                              Store 497 496
                              Line 1 211 0
             499:    459(ptr) AccessChain 338 200
             500:   23(fvec4) Load 499
             501:    153(ptr) AccessChain 467(mat) 152
             502:   23(fvec4) Load 501
             503:   23(fvec4) FMul 500 502
                              Store 498(ambient) 503
                              Line 1 214 0
                              Store 504(shadowFactor) 505
                              Line 1 215 0
             508:25(Material) Load 467(mat)
                              Store 507(param) 508
             510:   23(fvec4) Load 463(v_wPos)
             511:   15(fvec3) VectorShuffle 510 510 0 1 2
                              Store 509(param) 511
             513:   15(fvec3) Load 453(normal)
                              Store 512(param) 513
             515:   23(fvec4) Load 458(toEyeW)
             516:   15(fvec3) VectorShuffle 515 515 0 1 2
                              Store 514(param) 516
             518:   15(fvec3) Load 504(shadowFactor)
                              Store 517(param) 518
             519:   23(fvec4) FunctionCall 65(ComputeLighting(struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;vf3;) 507(param) 509(param) 512(param) 514(param) 517(param)
                              Store 506(directLight) 519
                              Line 1 216 0
             521:   23(fvec4) Load 498(ambient)
             522:   23(fvec4) Load 506(directLight)
             523:   23(fvec4) FAdd 521 522
                              Store 520(litColor) 523
                              Line 1 219 0
             525:      8(ptr) AccessChain 467(mat) 152 524
             526:    7(float) Load 525
             527:      8(ptr) AccessChain 520(litColor) 524
                              Store 527 526
                              Line 1 221 0
             530:   23(fvec4) Load 520(litColor)
                              Store 529(o_Color) 530
                              Return
                              FunctionEnd
13(CalcAttenuation(f1;f1;f1;):    7(float) Function None 9
           10(d):      8(ptr) FunctionParameter
11(falloffStart):      8(ptr) FunctionParameter
  12(falloffEnd):      8(ptr) FunctionParameter
              14:             Label
                              Line 1 63 0
              67:    7(float) Load 12(falloffEnd)
              68:    7(float) Load 10(d)
              69:    7(float) FSub 67 68
              70:    7(float) Load 12(falloffEnd)
              71:    7(float) Load 11(falloffStart)
              72:    7(float) FSub 70 71
              73:    7(float) FDiv 69 72
              76:    7(float) ExtInst 2(GLSL.std.450) 43(FClamp) 73 74 75
                              ReturnValue 76
                              FunctionEnd
21(SchlickFresnel(vf3;vf3;vf3;):   15(fvec3) Function None 17
          18(R0):     16(ptr) FunctionParameter
      19(normal):     16(ptr) FunctionParameter
    20(lightVec):     16(ptr) FunctionParameter
              22:             Label
79(cosIncidentAngle):      8(ptr) Variable Function
          84(f0):      8(ptr) Variable Function
87(reflectPercent):     16(ptr) Variable Function
                              Line 1 71 0
              80:   15(fvec3) Load 19(normal)
              81:   15(fvec3) Load 20(lightVec)
              82:    7(float) Dot 80 81
              83:    7(float) ExtInst 2(GLSL.std.450) 43(FClamp) 82 74 75
                              Store 79(cosIncidentAngle) 83
                              Line 1 72 0
              85:    7(float) Load 79(cosIncidentAngle)
              86:    7(float) FSub 75 85
                              Store 84(f0) 86
                              Line 1 73 0
              88:   15(fvec3) Load 18(R0)
              89:   15(fvec3) Load 18(R0)
              90:   15(fvec3) CompositeConstruct 75 75 75
              91:   15(fvec3) FSub 90 89
              92:    7(float) Load 84(f0)
              93:    7(float) Load 84(f0)
              94:    7(float) FMul 92 93
              95:    7(float) Load 84(f0)
              96:    7(float) FMul 94 95
              97:    7(float) Load 84(f0)
              98:    7(float) FMul 96 97
              99:    7(float) Load 84(f0)
             100:    7(float) FMul 98 99
             101:   15(fvec3) VectorTimesScalar 91 100
             102:   15(fvec3) FAdd 88 101
                              Store 87(reflectPercent) 102
                              Line 1 74 0
             103:   15(fvec3) Load 87(reflectPercent)
                              ReturnValue 103
                              FunctionEnd
33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;):   15(fvec3) Function None 27
28(lightStrength):     16(ptr) FunctionParameter
    29(lightVec):     16(ptr) FunctionParameter
      30(normal):     16(ptr) FunctionParameter
       31(toEye):     16(ptr) FunctionParameter
         32(mat):     26(ptr) FunctionParameter
              34:             Label
  106(shininess):      8(ptr) Variable Function
          112(m):      8(ptr) Variable Function
    116(halfVec):     16(ptr) Variable Function
121(roughnessFactor):      8(ptr) Variable Function
133(fresnelFactor):     16(ptr) Variable Function
      135(param):     16(ptr) Variable Function
      138(param):     16(ptr) Variable Function
      140(param):     16(ptr) Variable Function
 143(specAlbedo):     16(ptr) Variable Function
                              Line 1 80 0
             109:      8(ptr) AccessChain 32(mat) 108
             110:    7(float) Load 109
             111:    7(float) FSub 75 110
                              Store 106(shininess) 111
                              Line 1 81 0
             113:    7(float) Load 106(shininess)
             115:    7(float) FMul 113 114
                              Store 112(m) 115
                              Line 1 82 0
             117:   15(fvec3) Load 31(toEye)
             118:   15(fvec3) Load 29(lightVec)
             119:   15(fvec3) FAdd 117 118
             120:   15(fvec3) ExtInst 2(GLSL.std.450) 69(Normalize) 119
                              Store 116(halfVec) 120
                              Line 1 84 0
             122:    7(float) Load 112(m)
             124:    7(float) FAdd 122 123
             125:   15(fvec3) Load 116(halfVec)
             126:   15(fvec3) Load 30(normal)
             127:    7(float) Dot 125 126
             128:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 127 74
             129:    7(float) Load 112(m)
             130:    7(float) ExtInst 2(GLSL.std.450) 26(Pow) 128 129
             131:    7(float) FMul 124 130
             132:    7(float) FDiv 131 123
                              Store 121(roughnessFactor) 132
                              Line 1 85 0
             136:     16(ptr) AccessChain 32(mat) 134
             137:   15(fvec3) Load 136
                              Store 135(param) 137
             139:   15(fvec3) Load 116(halfVec)
                              Store 138(param) 139
             141:   15(fvec3) Load 29(lightVec)
                              Store 140(param) 141
             142:   15(fvec3) FunctionCall 21(SchlickFresnel(vf3;vf3;vf3;) 135(param) 138(param) 140(param)
                              Store 133(fresnelFactor) 142
                              Line 1 87 0
             144:   15(fvec3) Load 133(fresnelFactor)
             145:    7(float) Load 121(roughnessFactor)
             146:   15(fvec3) VectorTimesScalar 144 145
                              Store 143(specAlbedo) 146
                              Line 1 91 0
             147:   15(fvec3) Load 143(specAlbedo)
             148:   15(fvec3) Load 143(specAlbedo)
             149:   15(fvec3) CompositeConstruct 75 75 75
             150:   15(fvec3) FAdd 148 149
             151:   15(fvec3) FDiv 147 150
                              Store 143(specAlbedo) 151
                              Line 1 92 0
             154:    153(ptr) AccessChain 32(mat) 152
             155:   23(fvec4) Load 154
             156:   15(fvec3) VectorShuffle 155 155 0 1 2
             157:   15(fvec3) Load 143(specAlbedo)
             158:   15(fvec3) FAdd 156 157
             159:   15(fvec3) Load 28(lightStrength)
             160:   15(fvec3) FMul 158 159
                              ReturnValue 160
                              FunctionEnd
42(ComputeDirectionalLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;):   15(fvec3) Function None 37
           38(L):     36(ptr) FunctionParameter
         39(mat):     26(ptr) FunctionParameter
      40(normal):     16(ptr) FunctionParameter
       41(toEye):     16(ptr) FunctionParameter
              43:             Label
   163(lightVec):     16(ptr) Variable Function
      167(ndotl):      8(ptr) Variable Function
172(lightStrength):     16(ptr) Variable Function
      177(param):     16(ptr) Variable Function
      179(param):     16(ptr) Variable Function
      181(param):     16(ptr) Variable Function
      183(param):     16(ptr) Variable Function
      185(param):     26(ptr) Variable Function
                              Line 1 98 0
             164:     16(ptr) AccessChain 38(L) 108
             165:   15(fvec3) Load 164
             166:   15(fvec3) FNegate 165
                              Store 163(lightVec) 166
                              Line 1 101 0
             168:   15(fvec3) Load 163(lightVec)
             169:   15(fvec3) Load 40(normal)
             170:    7(float) Dot 168 169
             171:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 170 74
                              Store 167(ndotl) 171
                              Line 1 102 0
             173:     16(ptr) AccessChain 38(L) 152
             174:   15(fvec3) Load 173
             175:    7(float) Load 167(ndotl)
             176:   15(fvec3) VectorTimesScalar 174 175
                              Store 172(lightStrength) 176
                              Line 1 103 0
             178:   15(fvec3) Load 172(lightStrength)
                              Store 177(param) 178
             180:   15(fvec3) Load 163(lightVec)
                              Store 179(param) 180
             182:   15(fvec3) Load 40(normal)
                              Store 181(param) 182
             184:   15(fvec3) Load 41(toEye)
                              Store 183(param) 184
             186:25(Material) Load 39(mat)
                              Store 185(param) 186
             187:   15(fvec3) FunctionCall 33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;) 177(param) 179(param) 181(param) 183(param) 185(param)
                              ReturnValue 187
                              FunctionEnd
50(ComputePointLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;):   15(fvec3) Function None 44
           45(L):     36(ptr) FunctionParameter
         46(mat):     26(ptr) FunctionParameter
         47(pos):     16(ptr) FunctionParameter
      48(normal):     16(ptr) FunctionParameter
       49(toEye):     16(ptr) FunctionParameter
              51:             Label
   190(lightVec):     16(ptr) Variable Function
          196(d):      8(ptr) Variable Function
      213(ndotl):      8(ptr) Variable Function
218(lightStrength):     16(ptr) Variable Function
        223(att):      8(ptr) Variable Function
      224(param):      8(ptr) Variable Function
      226(param):      8(ptr) Variable Function
      229(param):      8(ptr) Variable Function
      236(param):     16(ptr) Variable Function
      238(param):     16(ptr) Variable Function
      240(param):     16(ptr) Variable Function
      242(param):     16(ptr) Variable Function
      244(param):     26(ptr) Variable Function
                              Line 1 109 0
             192:     16(ptr) AccessChain 45(L) 191
             193:   15(fvec3) Load 192
             194:   15(fvec3) Load 47(pos)
             195:   15(fvec3) FSub 193 194
                              Store 190(lightVec) 195
                              Line 1 112 0
             197:   15(fvec3) Load 190(lightVec)
             198:    7(float) ExtInst 2(GLSL.std.450) 66(Length) 197
                              Store 196(d) 198
                              Line 1 115 0
             199:    7(float) Load 196(d)
             201:      8(ptr) AccessChain 45(L) 200
             202:    7(float) Load 201
             204:   203(bool) FOrdGreaterThan 199 202
                              SelectionMerge 206 None
                              BranchConditional 204 205 206
             205:               Label
                                Line 1 116 0
                                ReturnValue 207
             206:             Label
                              Line 1 119 0
             209:    7(float) Load 196(d)
             210:   15(fvec3) Load 190(lightVec)
             211:   15(fvec3) CompositeConstruct 209 209 209
             212:   15(fvec3) FDiv 210 211
                              Store 190(lightVec) 212
                              Line 1 122 0
             214:   15(fvec3) Load 190(lightVec)
             215:   15(fvec3) Load 48(normal)
             216:    7(float) Dot 214 215
             217:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 216 74
                              Store 213(ndotl) 217
                              Line 1 123 0
             219:     16(ptr) AccessChain 45(L) 152
             220:   15(fvec3) Load 219
             221:    7(float) Load 213(ndotl)
             222:   15(fvec3) VectorTimesScalar 220 221
                              Store 218(lightStrength) 222
                              Line 1 126 0
             225:    7(float) Load 196(d)
                              Store 224(param) 225
             227:      8(ptr) AccessChain 45(L) 134
             228:    7(float) Load 227
                              Store 226(param) 228
             230:      8(ptr) AccessChain 45(L) 200
             231:    7(float) Load 230
                              Store 229(param) 231
             232:    7(float) FunctionCall 13(CalcAttenuation(f1;f1;f1;) 224(param) 226(param) 229(param)
                              Store 223(att) 232
                              Line 1 127 0
             233:    7(float) Load 223(att)
             234:   15(fvec3) Load 218(lightStrength)
             235:   15(fvec3) VectorTimesScalar 234 233
                              Store 218(lightStrength) 235
                              Line 1 129 0
             237:   15(fvec3) Load 218(lightStrength)
                              Store 236(param) 237
             239:   15(fvec3) Load 190(lightVec)
                              Store 238(param) 239
             241:   15(fvec3) Load 48(normal)
                              Store 240(param) 241
             243:   15(fvec3) Load 49(toEye)
                              Store 242(param) 243
             245:25(Material) Load 46(mat)
                              Store 244(param) 245
             246:   15(fvec3) FunctionCall 33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;) 236(param) 238(param) 240(param) 242(param) 244(param)
                              ReturnValue 246
                              FunctionEnd
57(ComputeSpotLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;):   15(fvec3) Function None 44
           52(L):     36(ptr) FunctionParameter
         53(mat):     26(ptr) FunctionParameter
         54(pos):     16(ptr) FunctionParameter
      55(normal):     16(ptr) FunctionParameter
       56(toEye):     16(ptr) FunctionParameter
              58:             Label
   249(lightVec):     16(ptr) Variable Function
          254(d):      8(ptr) Variable Function
      268(ndotl):      8(ptr) Variable Function
273(lightStrength):     16(ptr) Variable Function
        278(att):      8(ptr) Variable Function
      279(param):      8(ptr) Variable Function
      281(param):      8(ptr) Variable Function
      284(param):      8(ptr) Variable Function
 291(spotFactor):      8(ptr) Variable Function
      305(param):     16(ptr) Variable Function
      307(param):     16(ptr) Variable Function
      309(param):     16(ptr) Variable Function
      311(param):     16(ptr) Variable Function
      313(param):     26(ptr) Variable Function
                              Line 1 135 0
             250:     16(ptr) AccessChain 52(L) 191
             251:   15(fvec3) Load 250
             252:   15(fvec3) Load 54(pos)
             253:   15(fvec3) FSub 251 252
                              Store 249(lightVec) 253
                              Line 1 138 0
             255:   15(fvec3) Load 249(lightVec)
             256:    7(float) ExtInst 2(GLSL.std.450) 66(Length) 255
                              Store 254(d) 256
                              Line 1 141 0
             257:    7(float) Load 254(d)
             258:      8(ptr) AccessChain 52(L) 200
             259:    7(float) Load 258
             260:   203(bool) FOrdGreaterThan 257 259
                              SelectionMerge 262 None
                              BranchConditional 260 261 262
             261:               Label
                                Line 1 142 0
                                ReturnValue 207
             262:             Label
                              Line 1 145 0
             264:    7(float) Load 254(d)
             265:   15(fvec3) Load 249(lightVec)
             266:   15(fvec3) CompositeConstruct 264 264 264
             267:   15(fvec3) FDiv 265 266
                              Store 249(lightVec) 267
                              Line 1 148 0
             269:   15(fvec3) Load 249(lightVec)
             270:   15(fvec3) Load 55(normal)
             271:    7(float) Dot 269 270
             272:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 271 74
                              Store 268(ndotl) 272
                              Line 1 149 0
             274:     16(ptr) AccessChain 52(L) 152
             275:   15(fvec3) Load 274
             276:    7(float) Load 268(ndotl)
             277:   15(fvec3) VectorTimesScalar 275 276
                              Store 273(lightStrength) 277
                              Line 1 152 0
             280:    7(float) Load 254(d)
                              Store 279(param) 280
             282:      8(ptr) AccessChain 52(L) 134
             283:    7(float) Load 282
                              Store 281(param) 283
             285:      8(ptr) AccessChain 52(L) 200
             286:    7(float) Load 285
                              Store 284(param) 286
             287:    7(float) FunctionCall 13(CalcAttenuation(f1;f1;f1;) 279(param) 281(param) 284(param)
                              Store 278(att) 287
                              Line 1 153 0
             288:    7(float) Load 278(att)
             289:   15(fvec3) Load 273(lightStrength)
             290:   15(fvec3) VectorTimesScalar 289 288
                              Store 273(lightStrength) 290
                              Line 1 156 0
             292:   15(fvec3) Load 249(lightVec)
             293:   15(fvec3) FNegate 292
             294:     16(ptr) AccessChain 52(L) 108
             295:   15(fvec3) Load 294
             296:    7(float) Dot 293 295
             297:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 296 74
             299:      8(ptr) AccessChain 52(L) 298
             300:    7(float) Load 299
             301:    7(float) ExtInst 2(GLSL.std.450) 26(Pow) 297 300
                              Store 291(spotFactor) 301
                              Line 1 157 0
             302:    7(float) Load 291(spotFactor)
             303:   15(fvec3) Load 273(lightStrength)
             304:   15(fvec3) VectorTimesScalar 303 302
                              Store 273(lightStrength) 304
                              Line 1 159 0
             306:   15(fvec3) Load 273(lightStrength)
                              Store 305(param) 306
             308:   15(fvec3) Load 249(lightVec)
                              Store 307(param) 308
             310:   15(fvec3) Load 55(normal)
                              Store 309(param) 310
             312:   15(fvec3) Load 56(toEye)
                              Store 311(param) 312
             314:25(Material) Load 53(mat)
                              Store 313(param) 314
             315:   15(fvec3) FunctionCall 33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;) 305(param) 307(param) 309(param) 311(param) 313(param)
                              ReturnValue 315
                              FunctionEnd
65(ComputeLighting(struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;vf3;):   23(fvec4) Function None 59
         60(mat):     26(ptr) FunctionParameter
         61(pos):     16(ptr) FunctionParameter
      62(normal):     16(ptr) FunctionParameter
       63(toEye):     16(ptr) FunctionParameter
64(shadowFactor):     16(ptr) FunctionParameter
              66:             Label
     318(result):     16(ptr) Variable Function
          320(i):    319(ptr) Variable Function
      340(param):     36(ptr) Variable Function
      356(param):     26(ptr) Variable Function
      358(param):     16(ptr) Variable Function
      360(param):     16(ptr) Variable Function
      378(param):     36(ptr) Variable Function
      393(param):     26(ptr) Variable Function
      395(param):     16(ptr) Variable Function
      397(param):     16(ptr) Variable Function
      399(param):     16(ptr) Variable Function
      418(param):     36(ptr) Variable Function
      433(param):     26(ptr) Variable Function
      435(param):     16(ptr) Variable Function
      437(param):     16(ptr) Variable Function
      439(param):     16(ptr) Variable Function
                              Line 1 164 0
                              Store 318(result) 207
                              Line 1 165 0
                              Store 320(i) 152
                              Line 1 168 0
                              Store 320(i) 152
                              Branch 321
             321:             Label
                              LoopMerge 323 324 None
                              Branch 325
             325:             Label
             326:    107(int) Load 320(i)
             328:   203(bool) SLessThan 326 327(NUM_DIR_LIGHTS)
                              BranchConditional 328 322 323
             322:               Label
                                Line 1 170 0
             329:    107(int)   Load 320(i)
             330:      8(ptr)   AccessChain 64(shadowFactor) 329
             331:    7(float)   Load 330
             339:    107(int)   Load 320(i)
             342:    341(ptr)   AccessChain 338 191 339
             343:  332(Light)   Load 342
             344:   15(fvec3)   CompositeExtract 343 0
             345:     16(ptr)   AccessChain 340(param) 152
                                Store 345 344
             346:    7(float)   CompositeExtract 343 1
             347:      8(ptr)   AccessChain 340(param) 134
                                Store 347 346
             348:   15(fvec3)   CompositeExtract 343 2
             349:     16(ptr)   AccessChain 340(param) 108
                                Store 349 348
             350:    7(float)   CompositeExtract 343 3
             351:      8(ptr)   AccessChain 340(param) 200
                                Store 351 350
             352:   15(fvec3)   CompositeExtract 343 4
             353:     16(ptr)   AccessChain 340(param) 191
                                Store 353 352
             354:    7(float)   CompositeExtract 343 5
             355:      8(ptr)   AccessChain 340(param) 298
                                Store 355 354
             357:25(Material)   Load 60(mat)
                                Store 356(param) 357
             359:   15(fvec3)   Load 62(normal)
                                Store 358(param) 359
             361:   15(fvec3)   Load 63(toEye)
                                Store 360(param) 361
             362:   15(fvec3)   FunctionCall 42(ComputeDirectionalLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;) 340(param) 356(param) 358(param) 360(param)
             363:   15(fvec3)   VectorTimesScalar 362 331
             364:   15(fvec3)   Load 318(result)
             365:   15(fvec3)   FAdd 364 363
                                Store 318(result) 365
                                Branch 324
             324:               Label
                                Line 1 168 0
             366:    107(int)   Load 320(i)
             367:    107(int)   IAdd 366 134
                                Store 320(i) 367
                                Branch 321
             323:             Label
                              Line 1 173 0
                              Store 320(i) 327(NUM_DIR_LIGHTS)
                              Branch 368
             368:             Label
                              LoopMerge 370 371 None
                              Branch 372
             372:             Label
             373:    107(int) Load 320(i)
             376:   203(bool) SLessThan 373 375
                              BranchConditional 376 369 370
             369:               Label
                                Line 1 175 0
             377:    107(int)   Load 320(i)
             379:    341(ptr)   AccessChain 338 191 377
             380:  332(Light)   Load 379
             381:   15(fvec3)   CompositeExtract 380 0
             382:     16(ptr)   AccessChain 378(param) 152
                                Store 382 381
             383:    7(float)   CompositeExtract 380 1
             384:      8(ptr)   AccessChain 378(param) 134
                                Store 384 383
             385:   15(fvec3)   CompositeExtract 380 2
             386:     16(ptr)   AccessChain 378(param) 108
                                Store 386 385
             387:    7(float)   CompositeExtract 380 3
             388:      8(ptr)   AccessChain 378(param) 200
                                Store 388 387
             389:   15(fvec3)   CompositeExtract 380 4
             390:     16(ptr)   AccessChain 378(param) 191
                                Store 390 389
             391:    7(float)   CompositeExtract 380 5
             392:      8(ptr)   AccessChain 378(param) 298
                                Store 392 391
             394:25(Material)   Load 60(mat)
                                Store 393(param) 394
             396:   15(fvec3)   Load 61(pos)
                                Store 395(param) 396
             398:   15(fvec3)   Load 62(normal)
                                Store 397(param) 398
             400:   15(fvec3)   Load 63(toEye)
                                Store 399(param) 400
             401:   15(fvec3)   FunctionCall 50(ComputePointLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;) 378(param) 393(param) 395(param) 397(param) 399(param)
             402:   15(fvec3)   Load 318(result)
             403:   15(fvec3)   FAdd 402 401
                                Store 318(result) 403
                                Branch 371
             371:               Label
                                Line 1 173 0
             404:    107(int)   Load 320(i)
             405:    107(int)   IAdd 404 134
                                Store 320(i) 405
                                Branch 368
             370:             Label
                              Line 1 178 0
                              Store 320(i) 406
                              Branch 407
             407:             Label
                              LoopMerge 409 410 None
                              Branch 411
             411:             Label
             412:    107(int) Load 320(i)
             416:   203(bool) SLessThan 412 415
                              BranchConditional 416 408 409
             408:               Label
                                Line 1 180 0
             417:    107(int)   Load 320(i)
             419:    341(ptr)   AccessChain 338 191 417
             420:  332(Light)   Load 419
             421:   15(fvec3)   CompositeExtract 420 0
             422:     16(ptr)   AccessChain 418(param) 152
                                Store 422 421
             423:    7(float)   CompositeExtract 420 1
             424:      8(ptr)   AccessChain 418(param) 134
                                Store 424 423
             425:   15(fvec3)   CompositeExtract 420 2
             426:     16(ptr)   AccessChain 418(param) 108
                                Store 426 425
             427:    7(float)   CompositeExtract 420 3
             428:      8(ptr)   AccessChain 418(param) 200
                                Store 428 427
             429:   15(fvec3)   CompositeExtract 420 4
             430:     16(ptr)   AccessChain 418(param) 191
                                Store 430 429
             431:    7(float)   CompositeExtract 420 5
             432:      8(ptr)   AccessChain 418(param) 298
                                Store 432 431
             434:25(Material)   Load 60(mat)
                                Store 433(param) 434
             436:   15(fvec3)   Load 61(pos)
                                Store 435(param) 436
             438:   15(fvec3)   Load 62(normal)
                                Store 437(param) 438
             440:   15(fvec3)   Load 63(toEye)
                                Store 439(param) 440
             441:   15(fvec3)   FunctionCall 57(ComputeSpotLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;) 418(param) 433(param) 435(param) 437(param) 439(param)
             442:   15(fvec3)   Load 318(result)
             443:   15(fvec3)   FAdd 442 441
                                Store 318(result) 443
                                Branch 410
             410:               Label
                                Line 1 178 0
             444:    107(int)   Load 320(i)
             445:    107(int)   IAdd 444 134
                                Store 320(i) 445
                                Branch 407
             409:             Label
                              Line 1 183 0
             446:   15(fvec3) Load 318(result)
             447:    7(float) CompositeExtract 446 0
             448:    7(float) CompositeExtract 446 1
             449:    7(float) CompositeExtract 446 2
             450:   23(fvec4) CompositeConstruct 447 448 449 74
                              ReturnValue 450
                              FunctionEnd
