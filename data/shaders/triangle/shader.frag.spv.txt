shader.frag
// Module Version 10000
// Generated by (magic number): 80008
// Id's are bound by 629

                              Capability Shader
               2:             ExtInstImport  "GLSL.std.450"
                              MemoryModel Logical GLSL450
                              EntryPoint Fragment 5  "main" 309 322 352 627
                              ExecutionMode 5 OriginUpperLeft
               1:             String  "shader.frag"
                              Source GLSL 450 1  "// OpModuleProcessed client vulkan100
// OpModuleProcessed target-env vulkan1.0
// OpModuleProcessed entry-point main
#line 1
#version 450

/////////////////////////////////////////////////////
// Light
/////////////////////////////////////////////////////

#define MaxLights 16
#define NUM_DIR_LIGHTS 1
#define NUM_POINT_LIGHTS 1
#define NUM_SPOT_LIGHTS 0

struct Light
{
	vec3 strength; // light color
	float falloffStart; // point/spot light only
	vec3 direction;// directional/spot lightonly
	float falloffEnd; // point/spot light only
	vec3 position; // point/spot light only
	float spotPower; // spot light only
};

float CalcAttenuation(float d, float falloffStart, float falloffEnd)
{
	// Linear falloff.
	return clamp((falloffEnd - d) / (falloffEnd - falloffStart), 0.0f, 1.0f);
}

// Schlick gives an approximation to Fresne reflectance
// (see pg. 233 “Real-Time Rendering 3rd Ed.”).
// R0 = ( (n-1)/(n+1) )^2, where n is the index of refraction.
vec3 SchlickFresnel(vec3 R0, vec3 normal, vec3 lightVec)
{
	float cosIncidentAngle = clamp(dot(normal, lightVec), 0.0f, 1.0f);
	float f0 = 1.0f - cosIncidentAngle;
	vec3 reflectPercent = R0 + (1.0f - R0)* (f0*f0*f0*f0*f0);
	return reflectPercent;
}

struct Material
{
	vec4 diffuseAlbedo;
	vec3 fresnelR0;
	float roughness;
	mat4 matTransform;
};

vec3 BlinnPhong(vec3 lightStrength, vec3 lightVec, vec3 normal, vec3 toEye, Material mat)
{
	// Derive m from the shininess, which is derived from the roughness.
	const float shininess = 1.0f - mat.roughness;
	const float m = shininess * 256.0f;
	vec3 halfVec = normalize(toEye + lightVec);
	
	float roughnessFactor = (m + 8.0f)*pow(max(dot(halfVec, normal), 0.0f), m) / 8.0f;
	vec3 fresnelFactor = SchlickFresnel(mat.fresnelR0, halfVec, lightVec);
	
	vec3 specAlbedo = fresnelFactor*roughnessFactor;
	
	// Our spec formula goes outside [0,1] range, but we are doing
	// LDR rendering. So scale it down a bit.
	specAlbedo = specAlbedo / (specAlbedo + 1.0f);
	return (mat.diffuseAlbedo.rgb + specAlbedo) * lightStrength;
}

vec3 ComputeDirectionalLight(Light L, Material mat, vec3 normal, vec3 toEye)
{
	// The light vector aims opposite the direction the light rays travel.
	vec3 lightVec = -L.direction;
	
	// Scale light down by Lambert’s cosine law.
	float ndotl = max(dot(lightVec, normal), 0.0f);
	vec3 lightStrength = L.strength * ndotl;
	return BlinnPhong(lightStrength, lightVec, normal, toEye, mat);
}

vec3 ComputePointLight(Light L, Material mat, vec3 pos, vec3 normal, vec3 toEye)
{
	// The vector from the surface to the light.
	vec3 lightVec = L.position - pos;
	
	// The distance from surface to light.
	float d = length(lightVec);
	
	// Range test.
	if(d > L.falloffEnd)
	return vec3(0.0f, 0.0f, 0.0f);
	
	// Normalize the light vector.
	lightVec /= d;
	
	// Scale light down by Lambert’s cosine law.
	float ndotl = max(dot(lightVec, normal), 0.0f);
	vec3 lightStrength = L.strength * ndotl;
	
	// Attenuate light by distance.
	float att = CalcAttenuation(d, L.falloffStart, L.falloffEnd);
	lightStrength *= att;
	
	return BlinnPhong(lightStrength, lightVec, normal, toEye, mat);
}

vec3 ComputeSpotLight(Light L, Material mat, vec3 pos, vec3 normal, vec3 toEye)
{
	// The vector from the surface to the light.
	vec3 lightVec = L.position - pos;
	
	// The distance from surface to light.
	float d = length(lightVec);
	
	// Range test.
	if(d > L.falloffEnd)
	return vec3(0.0f, 0.0f, 0.0f);
	
	// Normalize the light vector.
	lightVec /= d;
	
	// Scale light down by Lambert’s cosine law.
	float ndotl = max(dot(lightVec, normal), 0.0f);
	vec3 lightStrength = L.strength * ndotl;
	
	// Attenuate light by distance.
	float att = CalcAttenuation(d, L.falloffStart, L.falloffEnd);
	lightStrength *= att;
	
	// Scale by spotlight
	float spotFactor = pow(max(dot(-lightVec, L.direction), 0.0f), L.spotPower);
	lightStrength *= spotFactor;
	
	return BlinnPhong(lightStrength, lightVec, normal, toEye, mat);
}

vec4 ComputeLighting(Light gLights[MaxLights], Material mat, vec3 pos, vec3 normal, vec3 toEye, vec3 shadowFactor)
{
	vec3 result = vec3(0.0f, 0.0f, 0.0f);
	int i = 0;
	
	#if (NUM_DIR_LIGHTS > 0)
		for(i = 0; i < NUM_DIR_LIGHTS; ++i)
		{
			result += shadowFactor[i] * ComputeDirectionalLight(gLights[i], mat, normal, toEye);
		}
	#endif
	
	#if (NUM_POINT_LIGHTS > 0)
		for(i = NUM_DIR_LIGHTS; i < NUM_DIR_LIGHTS+NUM_POINT_LIGHTS; ++i)
		{
			result += ComputePointLight(gLights[i], mat, pos, normal, toEye);
		}
	#endif
	
	#if (NUM_SPOT_LIGHTS > 0)
		for(i = NUM_DIR_LIGHTS + NUM_POINT_LIGHTS; i < NUM_DIR_LIGHTS + NUM_POINT_LIGHTS + NUM_SPOT_LIGHTS; ++i)
		{
			result += ComputeSpotLight(gLights[i], mat, pos, normal, toEye);
		}
	#endif
	
	return vec4(result, 0.0f);
}

/////////////////////////////////////////////////////
// Uniform
/////////////////////////////////////////////////////

layout(set=0, binding=0) uniform u_PassUniformBuffer {
    mat4 view;
    mat4 proj;
	vec4 eyePos;
	
	vec4 ambientLight;
	// Indices [0, NUM_DIR_LIGHTS) are directional lights;
	// indices [NUM_DIR_LIGHTS, NUM_DIR_LIGHTS+NUM_POINT_LIGHTS) are
	// point lights;
	// indices [NUM_DIR_LIGHTS+NUM_POINT_LIGHTS,
	// NUM_DIR_LIGHTS+NUM_POINT_LIGHT+NUM_SPOT_LIGHTS)
	// are spot lights for a maximum of MaxLights per object.
	Light lights[MaxLights];
};

layout(set=2, binding=0) uniform u_MaterialUniformBuffer{
	Material gMaterial;
};

layout(set=3, binding=0) uniform sampler2D u_Texture;

layout(location = 0) in vec3 v_Normal;
layout(location = 1) in vec2 v_Texcoord;
layout(location = 2) in vec4 v_wPos;

layout(location = 0) out vec4 o_Color;

/////////////////////////////////////////////////////
// Shader
/////////////////////////////////////////////////////

void main() {

	// Interpolating normal can unnormalize it, so renormalize it.
	vec3 normal = normalize(v_Normal);
	
	// Vector from point being lit to eye.
	vec4 toEyeW = normalize(eyePos - v_wPos);
	
	// Material
	Material mat = gMaterial;
	mat.diffuseAlbedo = mat.diffuseAlbedo * texture(u_Texture, v_Texcoord);
	
	// Indirect lighting.
	vec4 ambient = ambientLight * mat.diffuseAlbedo;
	
	// Direct lighting.
	vec3 shadowFactor = vec3(1.0f, 1.0f, 1.0f);
	vec4 directLight = ComputeLighting(lights, mat, v_wPos.xyz, normal, toEyeW.xyz, shadowFactor);
	vec4 litColor = ambient + directLight;
	
	// Common convention to take alpha from diffuse material.
	litColor.a = mat.diffuseAlbedo.a;

	o_Color = litColor;
}"
                              Name 5  "main"
                              Name 13  "CalcAttenuation(f1;f1;f1;"
                              Name 10  "d"
                              Name 11  "falloffStart"
                              Name 12  "falloffEnd"
                              Name 21  "SchlickFresnel(vf3;vf3;vf3;"
                              Name 18  "R0"
                              Name 19  "normal"
                              Name 20  "lightVec"
                              Name 25  "Material"
                              MemberName 25(Material) 0  "diffuseAlbedo"
                              MemberName 25(Material) 1  "fresnelR0"
                              MemberName 25(Material) 2  "roughness"
                              MemberName 25(Material) 3  "matTransform"
                              Name 33  "BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;"
                              Name 28  "lightStrength"
                              Name 29  "lightVec"
                              Name 30  "normal"
                              Name 31  "toEye"
                              Name 32  "mat"
                              Name 35  "Light"
                              MemberName 35(Light) 0  "strength"
                              MemberName 35(Light) 1  "falloffStart"
                              MemberName 35(Light) 2  "direction"
                              MemberName 35(Light) 3  "falloffEnd"
                              MemberName 35(Light) 4  "position"
                              MemberName 35(Light) 5  "spotPower"
                              Name 42  "ComputeDirectionalLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;"
                              Name 38  "L"
                              Name 39  "mat"
                              Name 40  "normal"
                              Name 41  "toEye"
                              Name 50  "ComputePointLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;"
                              Name 45  "L"
                              Name 46  "mat"
                              Name 47  "pos"
                              Name 48  "normal"
                              Name 49  "toEye"
                              Name 63  "ComputeLighting(struct-Light-vf3-f1-vf3-f1-vf3-f11[16];struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;vf3;"
                              Name 57  "gLights"
                              Name 58  "mat"
                              Name 59  "pos"
                              Name 60  "normal"
                              Name 61  "toEye"
                              Name 62  "shadowFactor"
                              Name 77  "cosIncidentAngle"
                              Name 82  "f0"
                              Name 85  "reflectPercent"
                              Name 104  "shininess"
                              Name 110  "m"
                              Name 114  "halfVec"
                              Name 119  "roughnessFactor"
                              Name 131  "fresnelFactor"
                              Name 133  "param"
                              Name 136  "param"
                              Name 138  "param"
                              Name 141  "specAlbedo"
                              Name 161  "lightVec"
                              Name 165  "ndotl"
                              Name 170  "lightStrength"
                              Name 175  "param"
                              Name 177  "param"
                              Name 179  "param"
                              Name 181  "param"
                              Name 183  "param"
                              Name 188  "lightVec"
                              Name 194  "d"
                              Name 211  "ndotl"
                              Name 216  "lightStrength"
                              Name 221  "att"
                              Name 222  "param"
                              Name 224  "param"
                              Name 227  "param"
                              Name 234  "param"
                              Name 236  "param"
                              Name 238  "param"
                              Name 240  "param"
                              Name 242  "param"
                              Name 247  "result"
                              Name 249  "i"
                              Name 261  "param"
                              Name 264  "param"
                              Name 266  "param"
                              Name 268  "param"
                              Name 284  "param"
                              Name 287  "param"
                              Name 289  "param"
                              Name 291  "param"
                              Name 293  "param"
                              Name 307  "normal"
                              Name 309  "v_Normal"
                              Name 312  "toEyeW"
                              Name 313  "Light"
                              MemberName 313(Light) 0  "strength"
                              MemberName 313(Light) 1  "falloffStart"
                              MemberName 313(Light) 2  "direction"
                              MemberName 313(Light) 3  "falloffEnd"
                              MemberName 313(Light) 4  "position"
                              MemberName 313(Light) 5  "spotPower"
                              Name 315  "u_PassUniformBuffer"
                              MemberName 315(u_PassUniformBuffer) 0  "view"
                              MemberName 315(u_PassUniformBuffer) 1  "proj"
                              MemberName 315(u_PassUniformBuffer) 2  "eyePos"
                              MemberName 315(u_PassUniformBuffer) 3  "ambientLight"
                              MemberName 315(u_PassUniformBuffer) 4  "lights"
                              Name 317  ""
                              Name 322  "v_wPos"
                              Name 326  "mat"
                              Name 327  "Material"
                              MemberName 327(Material) 0  "diffuseAlbedo"
                              MemberName 327(Material) 1  "fresnelR0"
                              MemberName 327(Material) 2  "roughness"
                              MemberName 327(Material) 3  "matTransform"
                              Name 328  "u_MaterialUniformBuffer"
                              MemberName 328(u_MaterialUniformBuffer) 0  "gMaterial"
                              Name 330  ""
                              Name 348  "u_Texture"
                              Name 352  "v_Texcoord"
                              Name 357  "ambient"
                              Name 363  "shadowFactor"
                              Name 365  "directLight"
                              Name 366  "param"
                              Name 605  "param"
                              Name 607  "param"
                              Name 610  "param"
                              Name 612  "param"
                              Name 615  "param"
                              Name 618  "litColor"
                              Name 627  "o_Color"
                              Decorate 309(v_Normal) Location 0
                              MemberDecorate 313(Light) 0 Offset 0
                              MemberDecorate 313(Light) 1 Offset 12
                              MemberDecorate 313(Light) 2 Offset 16
                              MemberDecorate 313(Light) 3 Offset 28
                              MemberDecorate 313(Light) 4 Offset 32
                              MemberDecorate 313(Light) 5 Offset 44
                              Decorate 314 ArrayStride 48
                              MemberDecorate 315(u_PassUniformBuffer) 0 ColMajor
                              MemberDecorate 315(u_PassUniformBuffer) 0 Offset 0
                              MemberDecorate 315(u_PassUniformBuffer) 0 MatrixStride 16
                              MemberDecorate 315(u_PassUniformBuffer) 1 ColMajor
                              MemberDecorate 315(u_PassUniformBuffer) 1 Offset 64
                              MemberDecorate 315(u_PassUniformBuffer) 1 MatrixStride 16
                              MemberDecorate 315(u_PassUniformBuffer) 2 Offset 128
                              MemberDecorate 315(u_PassUniformBuffer) 3 Offset 144
                              MemberDecorate 315(u_PassUniformBuffer) 4 Offset 160
                              Decorate 315(u_PassUniformBuffer) Block
                              Decorate 317 DescriptorSet 0
                              Decorate 317 Binding 0
                              Decorate 322(v_wPos) Location 2
                              MemberDecorate 327(Material) 0 Offset 0
                              MemberDecorate 327(Material) 1 Offset 16
                              MemberDecorate 327(Material) 2 Offset 28
                              MemberDecorate 327(Material) 3 ColMajor
                              MemberDecorate 327(Material) 3 Offset 32
                              MemberDecorate 327(Material) 3 MatrixStride 16
                              MemberDecorate 328(u_MaterialUniformBuffer) 0 Offset 0
                              Decorate 328(u_MaterialUniformBuffer) Block
                              Decorate 330 DescriptorSet 2
                              Decorate 330 Binding 0
                              Decorate 348(u_Texture) DescriptorSet 3
                              Decorate 348(u_Texture) Binding 0
                              Decorate 352(v_Texcoord) Location 1
                              Decorate 627(o_Color) Location 0
               3:             TypeVoid
               4:             TypeFunction 3
               7:             TypeFloat 32
               8:             TypePointer Function 7(float)
               9:             TypeFunction 7(float) 8(ptr) 8(ptr) 8(ptr)
              15:             TypeVector 7(float) 3
              16:             TypePointer Function 15(fvec3)
              17:             TypeFunction 15(fvec3) 16(ptr) 16(ptr) 16(ptr)
              23:             TypeVector 7(float) 4
              24:             TypeMatrix 23(fvec4) 4
    25(Material):             TypeStruct 23(fvec4) 15(fvec3) 7(float) 24
              26:             TypePointer Function 25(Material)
              27:             TypeFunction 15(fvec3) 16(ptr) 16(ptr) 16(ptr) 16(ptr) 26(ptr)
       35(Light):             TypeStruct 15(fvec3) 7(float) 15(fvec3) 7(float) 15(fvec3) 7(float)
              36:             TypePointer Function 35(Light)
              37:             TypeFunction 15(fvec3) 36(ptr) 26(ptr) 16(ptr) 16(ptr)
              44:             TypeFunction 15(fvec3) 36(ptr) 26(ptr) 16(ptr) 16(ptr) 16(ptr)
              52:             TypeInt 32 0
              53:     52(int) Constant 16
              54:             TypeArray 35(Light) 53
              55:             TypePointer Function 54
              56:             TypeFunction 23(fvec4) 55(ptr) 26(ptr) 16(ptr) 16(ptr) 16(ptr) 16(ptr)
              72:    7(float) Constant 0
              73:    7(float) Constant 1065353216
             105:             TypeInt 32 1
             106:    105(int) Constant 2
             112:    7(float) Constant 1132462080
             121:    7(float) Constant 1090519040
             132:    105(int) Constant 1
             150:    105(int) Constant 0
             151:             TypePointer Function 23(fvec4)
             189:    105(int) Constant 4
             198:    105(int) Constant 3
             201:             TypeBool
             205:   15(fvec3) ConstantComposite 72 72 72
             248:             TypePointer Function 105(int)
             308:             TypePointer Input 15(fvec3)
   309(v_Normal):    308(ptr) Variable Input
      313(Light):             TypeStruct 15(fvec3) 7(float) 15(fvec3) 7(float) 15(fvec3) 7(float)
             314:             TypeArray 313(Light) 53
315(u_PassUniformBuffer):             TypeStruct 24 24 23(fvec4) 23(fvec4) 314
             316:             TypePointer Uniform 315(u_PassUniformBuffer)
             317:    316(ptr) Variable Uniform
             318:             TypePointer Uniform 23(fvec4)
             321:             TypePointer Input 23(fvec4)
     322(v_wPos):    321(ptr) Variable Input
   327(Material):             TypeStruct 23(fvec4) 15(fvec3) 7(float) 24
328(u_MaterialUniformBuffer):             TypeStruct 327(Material)
             329:             TypePointer Uniform 328(u_MaterialUniformBuffer)
             330:    329(ptr) Variable Uniform
             331:             TypePointer Uniform 327(Material)
             341:             TypePointer Function 24
             345:             TypeImage 7(float) 2D sampled format:Unknown
             346:             TypeSampledImage 345
             347:             TypePointer UniformConstant 346
  348(u_Texture):    347(ptr) Variable UniformConstant
             350:             TypeVector 7(float) 2
             351:             TypePointer Input 350(fvec2)
 352(v_Texcoord):    351(ptr) Variable Input
             364:   15(fvec3) ConstantComposite 73 73 73
             367:             TypePointer Uniform 314
             383:    105(int) Constant 5
             456:    105(int) Constant 6
             471:    105(int) Constant 7
             486:    105(int) Constant 8
             501:    105(int) Constant 9
             516:    105(int) Constant 10
             531:    105(int) Constant 11
             546:    105(int) Constant 12
             561:    105(int) Constant 13
             576:    105(int) Constant 14
             591:    105(int) Constant 15
             622:     52(int) Constant 3
             626:             TypePointer Output 23(fvec4)
    627(o_Color):    626(ptr) Variable Output
         5(main):           3 Function None 4
               6:             Label
     307(normal):     16(ptr) Variable Function
     312(toEyeW):    151(ptr) Variable Function
        326(mat):     26(ptr) Variable Function
    357(ambient):    151(ptr) Variable Function
363(shadowFactor):     16(ptr) Variable Function
365(directLight):    151(ptr) Variable Function
      366(param):     55(ptr) Variable Function
      605(param):     26(ptr) Variable Function
      607(param):     16(ptr) Variable Function
      610(param):     16(ptr) Variable Function
      612(param):     16(ptr) Variable Function
      615(param):     16(ptr) Variable Function
   618(litColor):    151(ptr) Variable Function
                              Line 1 199 0
             310:   15(fvec3) Load 309(v_Normal)
             311:   15(fvec3) ExtInst 2(GLSL.std.450) 69(Normalize) 310
                              Store 307(normal) 311
                              Line 1 202 0
             319:    318(ptr) AccessChain 317 106
             320:   23(fvec4) Load 319
             323:   23(fvec4) Load 322(v_wPos)
             324:   23(fvec4) FSub 320 323
             325:   23(fvec4) ExtInst 2(GLSL.std.450) 69(Normalize) 324
                              Store 312(toEyeW) 325
                              Line 1 205 0
             332:    331(ptr) AccessChain 330 150
             333:327(Material) Load 332
             334:   23(fvec4) CompositeExtract 333 0
             335:    151(ptr) AccessChain 326(mat) 150
                              Store 335 334
             336:   15(fvec3) CompositeExtract 333 1
             337:     16(ptr) AccessChain 326(mat) 132
                              Store 337 336
             338:    7(float) CompositeExtract 333 2
             339:      8(ptr) AccessChain 326(mat) 106
                              Store 339 338
             340:          24 CompositeExtract 333 3
             342:    341(ptr) AccessChain 326(mat) 198
                              Store 342 340
                              Line 1 206 0
             343:    151(ptr) AccessChain 326(mat) 150
             344:   23(fvec4) Load 343
             349:         346 Load 348(u_Texture)
             353:  350(fvec2) Load 352(v_Texcoord)
             354:   23(fvec4) ImageSampleImplicitLod 349 353
             355:   23(fvec4) FMul 344 354
             356:    151(ptr) AccessChain 326(mat) 150
                              Store 356 355
                              Line 1 209 0
             358:    318(ptr) AccessChain 317 198
             359:   23(fvec4) Load 358
             360:    151(ptr) AccessChain 326(mat) 150
             361:   23(fvec4) Load 360
             362:   23(fvec4) FMul 359 361
                              Store 357(ambient) 362
                              Line 1 212 0
                              Store 363(shadowFactor) 364
                              Line 1 213 0
             368:    367(ptr) AccessChain 317 189
             369:         314 Load 368
             370:  313(Light) CompositeExtract 369 0
             371:     36(ptr) AccessChain 366(param) 150
             372:   15(fvec3) CompositeExtract 370 0
             373:     16(ptr) AccessChain 371 150
                              Store 373 372
             374:    7(float) CompositeExtract 370 1
             375:      8(ptr) AccessChain 371 132
                              Store 375 374
             376:   15(fvec3) CompositeExtract 370 2
             377:     16(ptr) AccessChain 371 106
                              Store 377 376
             378:    7(float) CompositeExtract 370 3
             379:      8(ptr) AccessChain 371 198
                              Store 379 378
             380:   15(fvec3) CompositeExtract 370 4
             381:     16(ptr) AccessChain 371 189
                              Store 381 380
             382:    7(float) CompositeExtract 370 5
             384:      8(ptr) AccessChain 371 383
                              Store 384 382
             385:  313(Light) CompositeExtract 369 1
             386:     36(ptr) AccessChain 366(param) 132
             387:   15(fvec3) CompositeExtract 385 0
             388:     16(ptr) AccessChain 386 150
                              Store 388 387
             389:    7(float) CompositeExtract 385 1
             390:      8(ptr) AccessChain 386 132
                              Store 390 389
             391:   15(fvec3) CompositeExtract 385 2
             392:     16(ptr) AccessChain 386 106
                              Store 392 391
             393:    7(float) CompositeExtract 385 3
             394:      8(ptr) AccessChain 386 198
                              Store 394 393
             395:   15(fvec3) CompositeExtract 385 4
             396:     16(ptr) AccessChain 386 189
                              Store 396 395
             397:    7(float) CompositeExtract 385 5
             398:      8(ptr) AccessChain 386 383
                              Store 398 397
             399:  313(Light) CompositeExtract 369 2
             400:     36(ptr) AccessChain 366(param) 106
             401:   15(fvec3) CompositeExtract 399 0
             402:     16(ptr) AccessChain 400 150
                              Store 402 401
             403:    7(float) CompositeExtract 399 1
             404:      8(ptr) AccessChain 400 132
                              Store 404 403
             405:   15(fvec3) CompositeExtract 399 2
             406:     16(ptr) AccessChain 400 106
                              Store 406 405
             407:    7(float) CompositeExtract 399 3
             408:      8(ptr) AccessChain 400 198
                              Store 408 407
             409:   15(fvec3) CompositeExtract 399 4
             410:     16(ptr) AccessChain 400 189
                              Store 410 409
             411:    7(float) CompositeExtract 399 5
             412:      8(ptr) AccessChain 400 383
                              Store 412 411
             413:  313(Light) CompositeExtract 369 3
             414:     36(ptr) AccessChain 366(param) 198
             415:   15(fvec3) CompositeExtract 413 0
             416:     16(ptr) AccessChain 414 150
                              Store 416 415
             417:    7(float) CompositeExtract 413 1
             418:      8(ptr) AccessChain 414 132
                              Store 418 417
             419:   15(fvec3) CompositeExtract 413 2
             420:     16(ptr) AccessChain 414 106
                              Store 420 419
             421:    7(float) CompositeExtract 413 3
             422:      8(ptr) AccessChain 414 198
                              Store 422 421
             423:   15(fvec3) CompositeExtract 413 4
             424:     16(ptr) AccessChain 414 189
                              Store 424 423
             425:    7(float) CompositeExtract 413 5
             426:      8(ptr) AccessChain 414 383
                              Store 426 425
             427:  313(Light) CompositeExtract 369 4
             428:     36(ptr) AccessChain 366(param) 189
             429:   15(fvec3) CompositeExtract 427 0
             430:     16(ptr) AccessChain 428 150
                              Store 430 429
             431:    7(float) CompositeExtract 427 1
             432:      8(ptr) AccessChain 428 132
                              Store 432 431
             433:   15(fvec3) CompositeExtract 427 2
             434:     16(ptr) AccessChain 428 106
                              Store 434 433
             435:    7(float) CompositeExtract 427 3
             436:      8(ptr) AccessChain 428 198
                              Store 436 435
             437:   15(fvec3) CompositeExtract 427 4
             438:     16(ptr) AccessChain 428 189
                              Store 438 437
             439:    7(float) CompositeExtract 427 5
             440:      8(ptr) AccessChain 428 383
                              Store 440 439
             441:  313(Light) CompositeExtract 369 5
             442:     36(ptr) AccessChain 366(param) 383
             443:   15(fvec3) CompositeExtract 441 0
             444:     16(ptr) AccessChain 442 150
                              Store 444 443
             445:    7(float) CompositeExtract 441 1
             446:      8(ptr) AccessChain 442 132
                              Store 446 445
             447:   15(fvec3) CompositeExtract 441 2
             448:     16(ptr) AccessChain 442 106
                              Store 448 447
             449:    7(float) CompositeExtract 441 3
             450:      8(ptr) AccessChain 442 198
                              Store 450 449
             451:   15(fvec3) CompositeExtract 441 4
             452:     16(ptr) AccessChain 442 189
                              Store 452 451
             453:    7(float) CompositeExtract 441 5
             454:      8(ptr) AccessChain 442 383
                              Store 454 453
             455:  313(Light) CompositeExtract 369 6
             457:     36(ptr) AccessChain 366(param) 456
             458:   15(fvec3) CompositeExtract 455 0
             459:     16(ptr) AccessChain 457 150
                              Store 459 458
             460:    7(float) CompositeExtract 455 1
             461:      8(ptr) AccessChain 457 132
                              Store 461 460
             462:   15(fvec3) CompositeExtract 455 2
             463:     16(ptr) AccessChain 457 106
                              Store 463 462
             464:    7(float) CompositeExtract 455 3
             465:      8(ptr) AccessChain 457 198
                              Store 465 464
             466:   15(fvec3) CompositeExtract 455 4
             467:     16(ptr) AccessChain 457 189
                              Store 467 466
             468:    7(float) CompositeExtract 455 5
             469:      8(ptr) AccessChain 457 383
                              Store 469 468
             470:  313(Light) CompositeExtract 369 7
             472:     36(ptr) AccessChain 366(param) 471
             473:   15(fvec3) CompositeExtract 470 0
             474:     16(ptr) AccessChain 472 150
                              Store 474 473
             475:    7(float) CompositeExtract 470 1
             476:      8(ptr) AccessChain 472 132
                              Store 476 475
             477:   15(fvec3) CompositeExtract 470 2
             478:     16(ptr) AccessChain 472 106
                              Store 478 477
             479:    7(float) CompositeExtract 470 3
             480:      8(ptr) AccessChain 472 198
                              Store 480 479
             481:   15(fvec3) CompositeExtract 470 4
             482:     16(ptr) AccessChain 472 189
                              Store 482 481
             483:    7(float) CompositeExtract 470 5
             484:      8(ptr) AccessChain 472 383
                              Store 484 483
             485:  313(Light) CompositeExtract 369 8
             487:     36(ptr) AccessChain 366(param) 486
             488:   15(fvec3) CompositeExtract 485 0
             489:     16(ptr) AccessChain 487 150
                              Store 489 488
             490:    7(float) CompositeExtract 485 1
             491:      8(ptr) AccessChain 487 132
                              Store 491 490
             492:   15(fvec3) CompositeExtract 485 2
             493:     16(ptr) AccessChain 487 106
                              Store 493 492
             494:    7(float) CompositeExtract 485 3
             495:      8(ptr) AccessChain 487 198
                              Store 495 494
             496:   15(fvec3) CompositeExtract 485 4
             497:     16(ptr) AccessChain 487 189
                              Store 497 496
             498:    7(float) CompositeExtract 485 5
             499:      8(ptr) AccessChain 487 383
                              Store 499 498
             500:  313(Light) CompositeExtract 369 9
             502:     36(ptr) AccessChain 366(param) 501
             503:   15(fvec3) CompositeExtract 500 0
             504:     16(ptr) AccessChain 502 150
                              Store 504 503
             505:    7(float) CompositeExtract 500 1
             506:      8(ptr) AccessChain 502 132
                              Store 506 505
             507:   15(fvec3) CompositeExtract 500 2
             508:     16(ptr) AccessChain 502 106
                              Store 508 507
             509:    7(float) CompositeExtract 500 3
             510:      8(ptr) AccessChain 502 198
                              Store 510 509
             511:   15(fvec3) CompositeExtract 500 4
             512:     16(ptr) AccessChain 502 189
                              Store 512 511
             513:    7(float) CompositeExtract 500 5
             514:      8(ptr) AccessChain 502 383
                              Store 514 513
             515:  313(Light) CompositeExtract 369 10
             517:     36(ptr) AccessChain 366(param) 516
             518:   15(fvec3) CompositeExtract 515 0
             519:     16(ptr) AccessChain 517 150
                              Store 519 518
             520:    7(float) CompositeExtract 515 1
             521:      8(ptr) AccessChain 517 132
                              Store 521 520
             522:   15(fvec3) CompositeExtract 515 2
             523:     16(ptr) AccessChain 517 106
                              Store 523 522
             524:    7(float) CompositeExtract 515 3
             525:      8(ptr) AccessChain 517 198
                              Store 525 524
             526:   15(fvec3) CompositeExtract 515 4
             527:     16(ptr) AccessChain 517 189
                              Store 527 526
             528:    7(float) CompositeExtract 515 5
             529:      8(ptr) AccessChain 517 383
                              Store 529 528
             530:  313(Light) CompositeExtract 369 11
             532:     36(ptr) AccessChain 366(param) 531
             533:   15(fvec3) CompositeExtract 530 0
             534:     16(ptr) AccessChain 532 150
                              Store 534 533
             535:    7(float) CompositeExtract 530 1
             536:      8(ptr) AccessChain 532 132
                              Store 536 535
             537:   15(fvec3) CompositeExtract 530 2
             538:     16(ptr) AccessChain 532 106
                              Store 538 537
             539:    7(float) CompositeExtract 530 3
             540:      8(ptr) AccessChain 532 198
                              Store 540 539
             541:   15(fvec3) CompositeExtract 530 4
             542:     16(ptr) AccessChain 532 189
                              Store 542 541
             543:    7(float) CompositeExtract 530 5
             544:      8(ptr) AccessChain 532 383
                              Store 544 543
             545:  313(Light) CompositeExtract 369 12
             547:     36(ptr) AccessChain 366(param) 546
             548:   15(fvec3) CompositeExtract 545 0
             549:     16(ptr) AccessChain 547 150
                              Store 549 548
             550:    7(float) CompositeExtract 545 1
             551:      8(ptr) AccessChain 547 132
                              Store 551 550
             552:   15(fvec3) CompositeExtract 545 2
             553:     16(ptr) AccessChain 547 106
                              Store 553 552
             554:    7(float) CompositeExtract 545 3
             555:      8(ptr) AccessChain 547 198
                              Store 555 554
             556:   15(fvec3) CompositeExtract 545 4
             557:     16(ptr) AccessChain 547 189
                              Store 557 556
             558:    7(float) CompositeExtract 545 5
             559:      8(ptr) AccessChain 547 383
                              Store 559 558
             560:  313(Light) CompositeExtract 369 13
             562:     36(ptr) AccessChain 366(param) 561
             563:   15(fvec3) CompositeExtract 560 0
             564:     16(ptr) AccessChain 562 150
                              Store 564 563
             565:    7(float) CompositeExtract 560 1
             566:      8(ptr) AccessChain 562 132
                              Store 566 565
             567:   15(fvec3) CompositeExtract 560 2
             568:     16(ptr) AccessChain 562 106
                              Store 568 567
             569:    7(float) CompositeExtract 560 3
             570:      8(ptr) AccessChain 562 198
                              Store 570 569
             571:   15(fvec3) CompositeExtract 560 4
             572:     16(ptr) AccessChain 562 189
                              Store 572 571
             573:    7(float) CompositeExtract 560 5
             574:      8(ptr) AccessChain 562 383
                              Store 574 573
             575:  313(Light) CompositeExtract 369 14
             577:     36(ptr) AccessChain 366(param) 576
             578:   15(fvec3) CompositeExtract 575 0
             579:     16(ptr) AccessChain 577 150
                              Store 579 578
             580:    7(float) CompositeExtract 575 1
             581:      8(ptr) AccessChain 577 132
                              Store 581 580
             582:   15(fvec3) CompositeExtract 575 2
             583:     16(ptr) AccessChain 577 106
                              Store 583 582
             584:    7(float) CompositeExtract 575 3
             585:      8(ptr) AccessChain 577 198
                              Store 585 584
             586:   15(fvec3) CompositeExtract 575 4
             587:     16(ptr) AccessChain 577 189
                              Store 587 586
             588:    7(float) CompositeExtract 575 5
             589:      8(ptr) AccessChain 577 383
                              Store 589 588
             590:  313(Light) CompositeExtract 369 15
             592:     36(ptr) AccessChain 366(param) 591
             593:   15(fvec3) CompositeExtract 590 0
             594:     16(ptr) AccessChain 592 150
                              Store 594 593
             595:    7(float) CompositeExtract 590 1
             596:      8(ptr) AccessChain 592 132
                              Store 596 595
             597:   15(fvec3) CompositeExtract 590 2
             598:     16(ptr) AccessChain 592 106
                              Store 598 597
             599:    7(float) CompositeExtract 590 3
             600:      8(ptr) AccessChain 592 198
                              Store 600 599
             601:   15(fvec3) CompositeExtract 590 4
             602:     16(ptr) AccessChain 592 189
                              Store 602 601
             603:    7(float) CompositeExtract 590 5
             604:      8(ptr) AccessChain 592 383
                              Store 604 603
             606:25(Material) Load 326(mat)
                              Store 605(param) 606
             608:   23(fvec4) Load 322(v_wPos)
             609:   15(fvec3) VectorShuffle 608 608 0 1 2
                              Store 607(param) 609
             611:   15(fvec3) Load 307(normal)
                              Store 610(param) 611
             613:   23(fvec4) Load 312(toEyeW)
             614:   15(fvec3) VectorShuffle 613 613 0 1 2
                              Store 612(param) 614
             616:   15(fvec3) Load 363(shadowFactor)
                              Store 615(param) 616
             617:   23(fvec4) FunctionCall 63(ComputeLighting(struct-Light-vf3-f1-vf3-f1-vf3-f11[16];struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;vf3;) 366(param) 605(param) 607(param) 610(param) 612(param) 615(param)
                              Store 365(directLight) 617
                              Line 1 214 0
             619:   23(fvec4) Load 357(ambient)
             620:   23(fvec4) Load 365(directLight)
             621:   23(fvec4) FAdd 619 620
                              Store 618(litColor) 621
                              Line 1 217 0
             623:      8(ptr) AccessChain 326(mat) 150 622
             624:    7(float) Load 623
             625:      8(ptr) AccessChain 618(litColor) 622
                              Store 625 624
                              Line 1 219 0
             628:   23(fvec4) Load 618(litColor)
                              Store 627(o_Color) 628
                              Return
                              FunctionEnd
13(CalcAttenuation(f1;f1;f1;):    7(float) Function None 9
           10(d):      8(ptr) FunctionParameter
11(falloffStart):      8(ptr) FunctionParameter
  12(falloffEnd):      8(ptr) FunctionParameter
              14:             Label
                              Line 1 25 0
              65:    7(float) Load 12(falloffEnd)
              66:    7(float) Load 10(d)
              67:    7(float) FSub 65 66
              68:    7(float) Load 12(falloffEnd)
              69:    7(float) Load 11(falloffStart)
              70:    7(float) FSub 68 69
              71:    7(float) FDiv 67 70
              74:    7(float) ExtInst 2(GLSL.std.450) 43(FClamp) 71 72 73
                              ReturnValue 74
                              FunctionEnd
21(SchlickFresnel(vf3;vf3;vf3;):   15(fvec3) Function None 17
          18(R0):     16(ptr) FunctionParameter
      19(normal):     16(ptr) FunctionParameter
    20(lightVec):     16(ptr) FunctionParameter
              22:             Label
77(cosIncidentAngle):      8(ptr) Variable Function
          82(f0):      8(ptr) Variable Function
85(reflectPercent):     16(ptr) Variable Function
                              Line 1 33 0
              78:   15(fvec3) Load 19(normal)
              79:   15(fvec3) Load 20(lightVec)
              80:    7(float) Dot 78 79
              81:    7(float) ExtInst 2(GLSL.std.450) 43(FClamp) 80 72 73
                              Store 77(cosIncidentAngle) 81
                              Line 1 34 0
              83:    7(float) Load 77(cosIncidentAngle)
              84:    7(float) FSub 73 83
                              Store 82(f0) 84
                              Line 1 35 0
              86:   15(fvec3) Load 18(R0)
              87:   15(fvec3) Load 18(R0)
              88:   15(fvec3) CompositeConstruct 73 73 73
              89:   15(fvec3) FSub 88 87
              90:    7(float) Load 82(f0)
              91:    7(float) Load 82(f0)
              92:    7(float) FMul 90 91
              93:    7(float) Load 82(f0)
              94:    7(float) FMul 92 93
              95:    7(float) Load 82(f0)
              96:    7(float) FMul 94 95
              97:    7(float) Load 82(f0)
              98:    7(float) FMul 96 97
              99:   15(fvec3) VectorTimesScalar 89 98
             100:   15(fvec3) FAdd 86 99
                              Store 85(reflectPercent) 100
                              Line 1 36 0
             101:   15(fvec3) Load 85(reflectPercent)
                              ReturnValue 101
                              FunctionEnd
33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;):   15(fvec3) Function None 27
28(lightStrength):     16(ptr) FunctionParameter
    29(lightVec):     16(ptr) FunctionParameter
      30(normal):     16(ptr) FunctionParameter
       31(toEye):     16(ptr) FunctionParameter
         32(mat):     26(ptr) FunctionParameter
              34:             Label
  104(shininess):      8(ptr) Variable Function
          110(m):      8(ptr) Variable Function
    114(halfVec):     16(ptr) Variable Function
119(roughnessFactor):      8(ptr) Variable Function
131(fresnelFactor):     16(ptr) Variable Function
      133(param):     16(ptr) Variable Function
      136(param):     16(ptr) Variable Function
      138(param):     16(ptr) Variable Function
 141(specAlbedo):     16(ptr) Variable Function
                              Line 1 50 0
             107:      8(ptr) AccessChain 32(mat) 106
             108:    7(float) Load 107
             109:    7(float) FSub 73 108
                              Store 104(shininess) 109
                              Line 1 51 0
             111:    7(float) Load 104(shininess)
             113:    7(float) FMul 111 112
                              Store 110(m) 113
                              Line 1 52 0
             115:   15(fvec3) Load 31(toEye)
             116:   15(fvec3) Load 29(lightVec)
             117:   15(fvec3) FAdd 115 116
             118:   15(fvec3) ExtInst 2(GLSL.std.450) 69(Normalize) 117
                              Store 114(halfVec) 118
                              Line 1 54 0
             120:    7(float) Load 110(m)
             122:    7(float) FAdd 120 121
             123:   15(fvec3) Load 114(halfVec)
             124:   15(fvec3) Load 30(normal)
             125:    7(float) Dot 123 124
             126:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 125 72
             127:    7(float) Load 110(m)
             128:    7(float) ExtInst 2(GLSL.std.450) 26(Pow) 126 127
             129:    7(float) FMul 122 128
             130:    7(float) FDiv 129 121
                              Store 119(roughnessFactor) 130
                              Line 1 55 0
             134:     16(ptr) AccessChain 32(mat) 132
             135:   15(fvec3) Load 134
                              Store 133(param) 135
             137:   15(fvec3) Load 114(halfVec)
                              Store 136(param) 137
             139:   15(fvec3) Load 29(lightVec)
                              Store 138(param) 139
             140:   15(fvec3) FunctionCall 21(SchlickFresnel(vf3;vf3;vf3;) 133(param) 136(param) 138(param)
                              Store 131(fresnelFactor) 140
                              Line 1 57 0
             142:   15(fvec3) Load 131(fresnelFactor)
             143:    7(float) Load 119(roughnessFactor)
             144:   15(fvec3) VectorTimesScalar 142 143
                              Store 141(specAlbedo) 144
                              Line 1 61 0
             145:   15(fvec3) Load 141(specAlbedo)
             146:   15(fvec3) Load 141(specAlbedo)
             147:   15(fvec3) CompositeConstruct 73 73 73
             148:   15(fvec3) FAdd 146 147
             149:   15(fvec3) FDiv 145 148
                              Store 141(specAlbedo) 149
                              Line 1 62 0
             152:    151(ptr) AccessChain 32(mat) 150
             153:   23(fvec4) Load 152
             154:   15(fvec3) VectorShuffle 153 153 0 1 2
             155:   15(fvec3) Load 141(specAlbedo)
             156:   15(fvec3) FAdd 154 155
             157:   15(fvec3) Load 28(lightStrength)
             158:   15(fvec3) FMul 156 157
                              ReturnValue 158
                              FunctionEnd
42(ComputeDirectionalLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;):   15(fvec3) Function None 37
           38(L):     36(ptr) FunctionParameter
         39(mat):     26(ptr) FunctionParameter
      40(normal):     16(ptr) FunctionParameter
       41(toEye):     16(ptr) FunctionParameter
              43:             Label
   161(lightVec):     16(ptr) Variable Function
      165(ndotl):      8(ptr) Variable Function
170(lightStrength):     16(ptr) Variable Function
      175(param):     16(ptr) Variable Function
      177(param):     16(ptr) Variable Function
      179(param):     16(ptr) Variable Function
      181(param):     16(ptr) Variable Function
      183(param):     26(ptr) Variable Function
                              Line 1 68 0
             162:     16(ptr) AccessChain 38(L) 106
             163:   15(fvec3) Load 162
             164:   15(fvec3) FNegate 163
                              Store 161(lightVec) 164
                              Line 1 71 0
             166:   15(fvec3) Load 161(lightVec)
             167:   15(fvec3) Load 40(normal)
             168:    7(float) Dot 166 167
             169:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 168 72
                              Store 165(ndotl) 169
                              Line 1 72 0
             171:     16(ptr) AccessChain 38(L) 150
             172:   15(fvec3) Load 171
             173:    7(float) Load 165(ndotl)
             174:   15(fvec3) VectorTimesScalar 172 173
                              Store 170(lightStrength) 174
                              Line 1 73 0
             176:   15(fvec3) Load 170(lightStrength)
                              Store 175(param) 176
             178:   15(fvec3) Load 161(lightVec)
                              Store 177(param) 178
             180:   15(fvec3) Load 40(normal)
                              Store 179(param) 180
             182:   15(fvec3) Load 41(toEye)
                              Store 181(param) 182
             184:25(Material) Load 39(mat)
                              Store 183(param) 184
             185:   15(fvec3) FunctionCall 33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;) 175(param) 177(param) 179(param) 181(param) 183(param)
                              ReturnValue 185
                              FunctionEnd
50(ComputePointLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;):   15(fvec3) Function None 44
           45(L):     36(ptr) FunctionParameter
         46(mat):     26(ptr) FunctionParameter
         47(pos):     16(ptr) FunctionParameter
      48(normal):     16(ptr) FunctionParameter
       49(toEye):     16(ptr) FunctionParameter
              51:             Label
   188(lightVec):     16(ptr) Variable Function
          194(d):      8(ptr) Variable Function
      211(ndotl):      8(ptr) Variable Function
216(lightStrength):     16(ptr) Variable Function
        221(att):      8(ptr) Variable Function
      222(param):      8(ptr) Variable Function
      224(param):      8(ptr) Variable Function
      227(param):      8(ptr) Variable Function
      234(param):     16(ptr) Variable Function
      236(param):     16(ptr) Variable Function
      238(param):     16(ptr) Variable Function
      240(param):     16(ptr) Variable Function
      242(param):     26(ptr) Variable Function
                              Line 1 79 0
             190:     16(ptr) AccessChain 45(L) 189
             191:   15(fvec3) Load 190
             192:   15(fvec3) Load 47(pos)
             193:   15(fvec3) FSub 191 192
                              Store 188(lightVec) 193
                              Line 1 82 0
             195:   15(fvec3) Load 188(lightVec)
             196:    7(float) ExtInst 2(GLSL.std.450) 66(Length) 195
                              Store 194(d) 196
                              Line 1 85 0
             197:    7(float) Load 194(d)
             199:      8(ptr) AccessChain 45(L) 198
             200:    7(float) Load 199
             202:   201(bool) FOrdGreaterThan 197 200
                              SelectionMerge 204 None
                              BranchConditional 202 203 204
             203:               Label
                                Line 1 86 0
                                ReturnValue 205
             204:             Label
                              Line 1 89 0
             207:    7(float) Load 194(d)
             208:   15(fvec3) Load 188(lightVec)
             209:   15(fvec3) CompositeConstruct 207 207 207
             210:   15(fvec3) FDiv 208 209
                              Store 188(lightVec) 210
                              Line 1 92 0
             212:   15(fvec3) Load 188(lightVec)
             213:   15(fvec3) Load 48(normal)
             214:    7(float) Dot 212 213
             215:    7(float) ExtInst 2(GLSL.std.450) 40(FMax) 214 72
                              Store 211(ndotl) 215
                              Line 1 93 0
             217:     16(ptr) AccessChain 45(L) 150
             218:   15(fvec3) Load 217
             219:    7(float) Load 211(ndotl)
             220:   15(fvec3) VectorTimesScalar 218 219
                              Store 216(lightStrength) 220
                              Line 1 96 0
             223:    7(float) Load 194(d)
                              Store 222(param) 223
             225:      8(ptr) AccessChain 45(L) 132
             226:    7(float) Load 225
                              Store 224(param) 226
             228:      8(ptr) AccessChain 45(L) 198
             229:    7(float) Load 228
                              Store 227(param) 229
             230:    7(float) FunctionCall 13(CalcAttenuation(f1;f1;f1;) 222(param) 224(param) 227(param)
                              Store 221(att) 230
                              Line 1 97 0
             231:    7(float) Load 221(att)
             232:   15(fvec3) Load 216(lightStrength)
             233:   15(fvec3) VectorTimesScalar 232 231
                              Store 216(lightStrength) 233
                              Line 1 99 0
             235:   15(fvec3) Load 216(lightStrength)
                              Store 234(param) 235
             237:   15(fvec3) Load 188(lightVec)
                              Store 236(param) 237
             239:   15(fvec3) Load 48(normal)
                              Store 238(param) 239
             241:   15(fvec3) Load 49(toEye)
                              Store 240(param) 241
             243:25(Material) Load 46(mat)
                              Store 242(param) 243
             244:   15(fvec3) FunctionCall 33(BlinnPhong(vf3;vf3;vf3;vf3;struct-Material-vf4-vf3-f1-mf441;) 234(param) 236(param) 238(param) 240(param) 242(param)
                              ReturnValue 244
                              FunctionEnd
63(ComputeLighting(struct-Light-vf3-f1-vf3-f1-vf3-f11[16];struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;vf3;):   23(fvec4) Function None 56
     57(gLights):     55(ptr) FunctionParameter
         58(mat):     26(ptr) FunctionParameter
         59(pos):     16(ptr) FunctionParameter
      60(normal):     16(ptr) FunctionParameter
       61(toEye):     16(ptr) FunctionParameter
62(shadowFactor):     16(ptr) FunctionParameter
              64:             Label
     247(result):     16(ptr) Variable Function
          249(i):    248(ptr) Variable Function
      261(param):     36(ptr) Variable Function
      264(param):     26(ptr) Variable Function
      266(param):     16(ptr) Variable Function
      268(param):     16(ptr) Variable Function
      284(param):     36(ptr) Variable Function
      287(param):     26(ptr) Variable Function
      289(param):     16(ptr) Variable Function
      291(param):     16(ptr) Variable Function
      293(param):     16(ptr) Variable Function
                              Line 1 134 0
                              Store 247(result) 205
                              Line 1 135 0
                              Store 249(i) 150
                              Line 1 138 0
                              Store 249(i) 150
                              Branch 250
             250:             Label
                              LoopMerge 252 253 None
                              Branch 254
             254:             Label
             255:    105(int) Load 249(i)
             256:   201(bool) SLessThan 255 132
                              BranchConditional 256 251 252
             251:               Label
                                Line 1 140 0
             257:    105(int)   Load 249(i)
             258:      8(ptr)   AccessChain 62(shadowFactor) 257
             259:    7(float)   Load 258
             260:    105(int)   Load 249(i)
             262:     36(ptr)   AccessChain 57(gLights) 260
             263:   35(Light)   Load 262
                                Store 261(param) 263
             265:25(Material)   Load 58(mat)
                                Store 264(param) 265
             267:   15(fvec3)   Load 60(normal)
                                Store 266(param) 267
             269:   15(fvec3)   Load 61(toEye)
                                Store 268(param) 269
             270:   15(fvec3)   FunctionCall 42(ComputeDirectionalLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;) 261(param) 264(param) 266(param) 268(param)
             271:   15(fvec3)   VectorTimesScalar 270 259
             272:   15(fvec3)   Load 247(result)
             273:   15(fvec3)   FAdd 272 271
                                Store 247(result) 273
                                Branch 253
             253:               Label
                                Line 1 138 0
             274:    105(int)   Load 249(i)
             275:    105(int)   IAdd 274 132
                                Store 249(i) 275
                                Branch 250
             252:             Label
                              Line 1 145 0
                              Store 249(i) 132
                              Branch 276
             276:             Label
                              LoopMerge 278 279 None
                              Branch 280
             280:             Label
             281:    105(int) Load 249(i)
             282:   201(bool) SLessThan 281 106
                              BranchConditional 282 277 278
             277:               Label
                                Line 1 147 0
             283:    105(int)   Load 249(i)
             285:     36(ptr)   AccessChain 57(gLights) 283
             286:   35(Light)   Load 285
                                Store 284(param) 286
             288:25(Material)   Load 58(mat)
                                Store 287(param) 288
             290:   15(fvec3)   Load 59(pos)
                                Store 289(param) 290
             292:   15(fvec3)   Load 60(normal)
                                Store 291(param) 292
             294:   15(fvec3)   Load 61(toEye)
                                Store 293(param) 294
             295:   15(fvec3)   FunctionCall 50(ComputePointLight(struct-Light-vf3-f1-vf3-f1-vf3-f11;struct-Material-vf4-vf3-f1-mf441;vf3;vf3;vf3;) 284(param) 287(param) 289(param) 291(param) 293(param)
             296:   15(fvec3)   Load 247(result)
             297:   15(fvec3)   FAdd 296 295
                                Store 247(result) 297
                                Branch 279
             279:               Label
                                Line 1 145 0
             298:    105(int)   Load 249(i)
             299:    105(int)   IAdd 298 132
                                Store 249(i) 299
                                Branch 276
             278:             Label
                              Line 1 158 0
             300:   15(fvec3) Load 247(result)
             301:    7(float) CompositeExtract 300 0
             302:    7(float) CompositeExtract 300 1
             303:    7(float) CompositeExtract 300 2
             304:   23(fvec4) CompositeConstruct 301 302 303 72
                              ReturnValue 304
                              FunctionEnd
